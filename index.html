<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="keywords" content="Computational Science, Publication, Reproducibility, Workflows">

<title>Language identification method comparison</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="index_files/libs/quarto-contrib/social-share-0.1.0/social-share.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/social-share-0.1.0/all.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/downloadthis-1.9.1/downloadthis.css" rel="stylesheet">
<script type="module" src="index_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="index_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="index_files/libs/quarto-diagram/mermaid.min.js"></script>
<script src="index_files/libs/quarto-diagram/mermaid-init.js"></script>
<link href="index_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Language identification method comparison</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
            <p class="subtitle lead">A LivePublication example, and testbed.</p>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-heading">Affiliations</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Augustus Ellerm <a href="https://orcid.org/0000-1111-2222-3333" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              University of Canterbury, Christchurch, New Zealand
            </p>
        </div>
        <div class="quarto-title-meta-contents">
      <p class="author">Mark Gahegan <a href="https://orcid.org/0000-3333-2222-1111" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              University of Auckland, Auckland, New Zealand
            </p>
        </div>
        <div class="quarto-title-meta-contents">
      <p class="author">Benjamin Adams <a href="https://orcid.org/0000-2222-1111-3333" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              University of Canterbury, Christchurch, New Zealand
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">6/27/23</p>
      </div>
    </div>
    
      
    </div>
    
  <div>
    <div class="abstract">
      <div class="abstract-title">Abstract</div>
      <p>This article presents an early look at how the LivePublication framework can enable live, updating components and generative content for computationally driven sciences. Presented is a language identification performance task, comparing the accuracy of two methods (langdetect and fastText).</p>
    </div>
  </div>
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#language-identification-method-comparison" id="toc-language-identification-method-comparison" class="nav-link active" data-scroll-target="#language-identification-method-comparison">Language identification method comparison</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#globus-flow-and-orchestration-crate-generation" id="toc-globus-flow-and-orchestration-crate-generation" class="nav-link" data-scroll-target="#globus-flow-and-orchestration-crate-generation">Globus flow, and orchestration crate generation</a></li>
  <li><a href="#reactive-publications-and-programmatic-articles" id="toc-reactive-publications-and-programmatic-articles" class="nav-link" data-scroll-target="#reactive-publications-and-programmatic-articles">Reactive publications and programmatic articles</a>
  <ul class="collapse">
  <li><a href="#variable-text" id="toc-variable-text" class="nav-link" data-scroll-target="#variable-text">Variable text</a></li>
  <li><a href="#delimited-variables-and-dashboard-like-functionality" id="toc-delimited-variables-and-dashboard-like-functionality" class="nav-link" data-scroll-target="#delimited-variables-and-dashboard-like-functionality">Delimited variables and dashboard-like functionality</a></li>
  </ul></li>
  <li><a href="#lid-performance-comparison" id="toc-lid-performance-comparison" class="nav-link" data-scroll-target="#lid-performance-comparison">LID performance comparison</a>
  <ul class="collapse">
  <li><a href="#figure-integration-and-generation" id="toc-figure-integration-and-generation" class="nav-link" data-scroll-target="#figure-integration-and-generation">Figure integration and generation</a></li>
  </ul></li>
  <li><a href="#workflow-method-description" id="toc-workflow-method-description" class="nav-link" data-scroll-target="#workflow-method-description">Workflow / Method description</a>
  <ul class="collapse">
  <li><a href="#method-description-generation-experiement" id="toc-method-description-generation-experiement" class="nav-link" data-scroll-target="#method-description-generation-experiement">Method description generation experiement</a></li>
  </ul></li>
  <li><a href="#referencing" id="toc-referencing" class="nav-link" data-scroll-target="#referencing">Referencing</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<section id="language-identification-method-comparison" class="level1 page-columns page-full">
<h1>Language identification method comparison</h1>
<section id="introduction" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Welcome to our LivePublication demonstration! The landscape of scientific research is ever-evolving, and with it, the way we share and consume scientific knowledge needs to progress. Traditional scientific publishing, with its static format, often struggles to effectively convey the dynamic nature of modern computational research. This article represents initial steps toward enabling and standardising methods of integrating distributed scientific workflows with top level narrative text, building a pipeline from workflow execution, to publication outputs.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="" style="color: green;">Green links</a> indicate links to the underpining orchestration crate.</p>
</div></div><p>The LivePublication framework aims to enable live, reactive publications while simultaneously enhancing transparency, repeatability, and collaborative scientific research. In order to achive this, LivePublication leverages custom Globus action providers (<a href="https://action-provider-tools.readthedocs.io/en/latest/">AP overview</a>, <a href="https://github.com/LivePublication/LP_GlobusAP_Template">custom AP</a>) to simultaniously perform work within workflows, and generate descriptive RO-Crates.</p>
<p>Subsequently, these individual artefacts come together to form an ‘orchestration crate’. This crate offers a comprehensive description of the workflow execution, cataloging inputs, outputs, methods, and associated metadata.</p>
<p>The generated orchestration crate serves as a data model for publications, exemplified by this website, which offers live updates to figures, metrics, and other metadata. The design, captured metadata, and integration techniques with the publication are all areas currently being refined. For a deeper exploration of this method, refer to <a href="https://livepublication.github.io/LP_Pub_DistCompPub/">this article</a>.</p>
<p>For an overview of the publication pipeline behind this article, see <a href="#fig-globus-overview">Figure&nbsp;1</a>. It’s important to mention that the methods featured within Layer 3, pertaining to publication and presentation, are showcased for demonstration only. We are actively researching the transition from the orchestration crate to the final compiled article.</p>
<div class="column-body-outset">
<div id="fig-globus-overview" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="globus-overview.svg" class="img-fluid figure-img" alt="A figure of the overall LivePublication pipeline used to generate this article."></p>
<figcaption class="figure-caption">Figure&nbsp;1: Publication pipline overview</figcaption>
</figure>
</div>
</div>
<p>A browseable version of the orchestration crate can be found <a href="http://130.216.217.137:8080" style="color: green;">here</a> for demonstration purposes.</p>
</section>
<section id="globus-flow-and-orchestration-crate-generation" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="globus-flow-and-orchestration-crate-generation">Globus flow, and orchestration crate generation</h2>
<p>Find a simple representation of the Globus flow below. Each node in the flow diagram provides a link to execution details within the orchestration crate.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  data_store[(Data store)] --&gt; transfer_ap[Transfer AP]
  transfer_ap --&gt; ft[[fastText LPAP]] &amp; ld[[langdetect LPAP]]
  ft &amp; ld --&gt; transfer_ap2[Transfer AP]
  transfer_ap2 --&gt; stats[[Statistics LPAP]]
  stats --&gt; transfer_ap3[Transfer AP]
  transfer_ap3 --&gt; results_store[(Results store)]
  click transfer_ap "http://130.216.217.137:8080/#DS_fastText_Transfer.py" "Go to transfer 1"
  click ft "http://130.216.217.137:8080/#fastText.py" "Go to fastText LPAP"
  click transfer_ap2 "http://130.216.217.137:8080/#fastText_statistics_transfer.py" "go to transfer 2"
  click ld "http://130.216.217.137:8080/#langdetect.py" "Go to langdetect LPAP"
  click transfer_ap_3 "http://130.216.217.137:8080/#langdetect_statistics_transfer.py" "Go to transfer 3"
  click stats "http://130.216.217.137:8080/#statistics.py" "Go to statistics LPAP"
</pre>
</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Click on each component to be directed to the relevant orchestration crate component.</p>
</div></div></section>
<section id="reactive-publications-and-programmatic-articles" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="reactive-publications-and-programmatic-articles">Reactive publications and programmatic articles</h2>
<p>This section provides examples of how we can leverage live data to create variable, or dependent text. There are many plausable methods for how variable content can be implemented. At its most basic, switch or if statements can be used to include/exclude information dependent on a combination of variables. More complex applications include hybrid LLM/Author NL generation, providing more flexible outputs.</p>
<!-- Load in variables & provide reactive components -->
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="62" data-source-offset="-0"><pre class="sourceCode js code-overflow-wrap code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 61;"><span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>fastText_stats <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"orchestration_crate/statistics_lpap/output/fastText_stats.json"</span>)<span class="op">.</span><span class="fu">json</span>() </span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>langdetect_stats <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"orchestration_crate/statistics_lpap/output/langdetect_stats.json"</span>)<span class="op">.</span><span class="fu">json</span>() </span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>fastText_acc_actual <span class="op">=</span> fastText_stats[<span class="st">"overall_accuracy"</span>] </span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>langdetect_acc_actual <span class="op">=</span> langdetect_stats[<span class="st">"overall_accuracy"</span>] </span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>viewof fastText_acc <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">80.0</span><span class="op">,</span> <span class="fl">100.0</span>]<span class="op">,</span> {</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"FastText accuracy:"</span><span class="op">,</span> </span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> fastText_acc_actual<span class="op">,</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>viewof langdetect_acc <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">80.0</span><span class="op">,</span> <span class="fl">100.0</span>]<span class="op">,</span> {</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Langdetect accuracy:"</span><span class="op">,</span> </span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> langdetect_acc_actual<span class="op">,</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-6" data-nodetype="declaration">

</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Modifying these parameters changes the data-model, and therefore the outputs of this article.</p>
</div></div><section id="variable-text" class="level3">
<h3 class="anchored" data-anchor-id="variable-text">Variable text</h3>
<p>A simple example of variable text is provided below. Depending on the relative accuracy results of each model (fastText, langdetect) the content changes.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" data-startfrom="93" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 92;"><span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>accuracy_conclusion <span class="op">=</span> {</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (fastText_acc <span class="op">&gt;</span> langdetect_acc) {</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`FastText achieved a greater accuracy, achieving </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">% compared to langdetect, which achieved </span><span class="sc">${</span>langdetect_acc<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (fastText_acc <span class="op">&lt;</span> langdetect_acc) {</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Langdetect achieved a greater accuracy, achieving </span><span class="sc">${</span>langdetect_acc<span class="sc">}</span><span class="vs">% vs fastText's </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`FastText and langdetect both achieved the same accuracy: </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Variable Text
</div>
</div>
<div class="callout-body-container callout-body">
<p><span><span id="ojs-element-id-1"></span></span></p>
</div>
</div>
</section>
<section id="delimited-variables-and-dashboard-like-functionality" class="level3">
<h3 class="anchored" data-anchor-id="delimited-variables-and-dashboard-like-functionality">Delimited variables and dashboard-like functionality</h3>
<p>Rather than a simple switch statement as above, we can provide alerts if variables exit a delimited range, or the relationship between variables changes.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" data-startfrom="116" data-source-offset="0"><pre class="sourceCode js code-overflow-wrap code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 115;"><span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>fastText_limit <span class="op">=</span> {</span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">isInRange</span>(value<span class="op">,</span> lowerBound<span class="op">,</span> upperBound) {</span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value <span class="op">&gt;=</span> lowerBound <span class="op">&amp;&amp;</span> value <span class="op">&lt;=</span> upperBound<span class="op">;</span></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> fastText_lower <span class="op">=</span> <span class="dv">90</span><span class="op">;</span></span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> fastText_upper <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="fu">isInRange</span>(fastText_acc<span class="op">,</span> fastText_lower<span class="op">,</span> fastText_upper)) {</span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Not in Range: </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">% is outside the range of </span><span class="sc">${</span>fastText_lower<span class="sc">}</span><span class="vs">% - </span><span class="sc">${</span>fastText_upper<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Within Range: </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">% is within the range of </span><span class="sc">${</span>fastText_lower<span class="sc">}</span><span class="vs">% - </span><span class="sc">${</span>fastText_upper<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" data-startfrom="133" data-source-offset="0"><pre class="sourceCode js code-overflow-wrap code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 132;"><span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a>langdetect_limit <span class="op">=</span> {</span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">isInRange</span>(value<span class="op">,</span> lowerBound<span class="op">,</span> upperBound) {</span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value <span class="op">&gt;=</span> lowerBound <span class="op">&amp;&amp;</span> value <span class="op">&lt;=</span> upperBound<span class="op">;</span></span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> langdetect_lower <span class="op">=</span> <span class="dv">90</span><span class="op">;</span></span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> langdetect_upper <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="fu">isInRange</span>(langdetect_acc<span class="op">,</span> langdetect_lower<span class="op">,</span> langdetect_upper)) {</span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Not in Range: </span><span class="sc">${</span>langdetect_acc<span class="sc">}</span><span class="vs">% is outside the range of </span><span class="sc">${</span>langdetect_lower<span class="sc">}</span><span class="vs">% - </span><span class="sc">${</span>langdetect_upper<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Within Range: </span><span class="sc">${</span>langdetect_acc<span class="sc">}</span><span class="vs">% is within the range of </span><span class="sc">${</span>langdetect_lower<span class="sc">}</span><span class="vs">% - </span><span class="sc">${</span>langdetect_upper<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
fastText accuracy limit
</div>
</div>
<div class="callout-body-container callout-body">
<p><span><span id="ojs-element-id-2"></span></span></p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
fastText accuracy limit
</div>
</div>
<div class="callout-body-container callout-body">
<p><span><span id="ojs-element-id-3"></span></span></p>
</div>
</div>
</section>
</section>
<section id="lid-performance-comparison" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="lid-performance-comparison">LID performance comparison</h2>
<p>While future LivePublication applications will primarily focus on how author-driven content can be realistically, and seamlessly integrated with live updating articles, this article uses mostly generative content drawing on data exported from the <a href="http://130.216.217.137:8080/" style="color: green;">orchestration crate</a>. Research on how the author and live content can be integrated is ongoing. Below, GPT-4 provides a short description of the results of this computational workflow, drawing on data generated during the flow. An overview of the LID comparison is provided in <a href="#fig-accuracies_by_language">Figure&nbsp;2</a>.</p>
<ul>
<li>Model: GPT-4</li>
<li>Prompt: This experiment compares the performance of two language identification methods: fastText and Langdetect. FastText’s results are <a href="http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/fastText_stats.json" style="color: green;">results</a> and langdetect results are <a href="http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/langdetect_stats.json" style="color: green;">results</a>. Write a few paragraphs discussing the performance of each, comparing their best and worst language accuracies.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Generative Content
</div>
</div>
<div class="callout-body-container callout-body">
<p>The evaluation of the language identification methods - fastText and Langdetect - reveals a nuanced performance profile contingent on the specific language being identified. Overall, the fastText model demonstrated superior performance with an overall accuracy of <a href="http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/fastText_stats.json" style="color: green;"><code>98.6%</code></a> compared to Langdetect’s <a href="http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/langdetect_stats.json" style="color: green;"><code>97.91%</code></a>. This comparison, however, does not capture the individual variances in accuracy across languages for the two models.</p>
<p>Delving into these language-specific performances, FastText exhibits impeccable accuracy in identifying several languages. These include German (deu), Greek (ell), English (eng), French (fra), Japanese (jpn), Thai (tha), and Chinese (zho) - all at 100% accuracy. Other languages such as Bulgarian (bul), Italian (ita), Russian (rus), and Vietnamese (vie) also show remarkable results with accuracy close to 100%. FastText’s weakest performance is observed for Swahili (swa) at <a href="http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/fastText_stats.json" style="color: green;"><code>85.4%</code></a> accuracy, indicating a potential area for model improvement.</p>
<p>On the other hand, Langdetect also showcased impressive accuracy with several languages reaching 100% identification rate, namely Greek (ell), Japanese (jpn), Thai (tha), and Vietnamese (vie). It performed notably well with Arabic (ara), German (deu), and Turkish (tur) too, with accuracy rates nearing 100%. The lowest performance was observed with Dutch (nld) at <a href="http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/langdetect_stats.json" style="color: green;"><code>93.6%</code></a>, signifying a potential area of focus for future model enhancements.</p>
<p>When comparing the two models on specific languages, FastText notably outperforms Langdetect in identifying languages such as Bulgarian, English, French, Dutch, Polish, Portuguese, and Spanish. Conversely, both models demonstrate equivalent performance in Arabic, Greek, Japanese, Thai, and Vietnamese identification. Langdetect’s performance appears to surpass FastText slightly in Hindi and Urdu.</p>
</div>
</div>
<section id="figure-integration-and-generation" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="figure-integration-and-generation">Figure integration and generation</h3>
<p>Figures and other visualisations can either be generated during the execution of a workflow, or implemented at the document level through code blocks. An example of both approaches is provided below.</p>
<div id="fig-accuracies_by_language" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><a href="http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/accuracy_by_language.png"><img src="orchestration_crate/statistics_lpap/output/accuracy_by_language.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Figure&nbsp;2: Accuracy by language</figcaption>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>This figure was generated during the statistics step of the workflow. Click to be directed to this component within the orchestration crate.</p>
</div></div><p><a href="#fig-accuracies_by_language">Figure&nbsp;2</a>, above, was generated within the workflow, however, as the orchestration crate contains the data generated via the workflow, we can generate these figures at the document level as well.</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="192" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 191;"><span id="cb5-192"><a href="#cb5-192" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3@7"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
<div id="d3-visualization">

</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>This figure was generated within the Quarto document using data collected from the orchestration crate <a href="http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/accuracy_by_language.csv" style="color: green;">here</a> and showcases how LivePublications can integrate with top-level code/narrative-text technologies (e.g.&nbsp;Quarto, Jupyter notebooks, Google colaboratory).</p>
</div></div><div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" data-startfrom="207" data-source-offset="0"><pre class="sourceCode js code-overflow-wrap code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 206;"><span id="cb6-207"><a href="#cb6-207" aria-hidden="true" tabindex="-1"></a>visualisation <span class="op">=</span> {</span>
<span id="cb6-208"><a href="#cb6-208" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"orchestration_crate/statistics_lpap/output/accuracy_by_language.csv"</span>)<span class="op">.</span><span class="fu">then</span>(data <span class="kw">=&gt;</span> {</span>
<span id="cb6-209"><a href="#cb6-209" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> container <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="st">"#d3-visualization"</span>)<span class="op">;</span></span>
<span id="cb6-210"><a href="#cb6-210" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> margin <span class="op">=</span> { <span class="dt">top</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span> <span class="dt">right</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">bottom</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="dt">left</span><span class="op">:</span> <span class="dv">25</span> }<span class="op">;</span>  </span>
<span id="cb6-211"><a href="#cb6-211" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> svgWidth <span class="op">=</span> container<span class="op">.</span><span class="fu">node</span>()<span class="op">.</span><span class="fu">getBoundingClientRect</span>()<span class="op">.</span><span class="at">width</span><span class="op">;</span></span>
<span id="cb6-212"><a href="#cb6-212" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> barHeight <span class="op">=</span> <span class="dv">5</span><span class="op">;</span>  <span class="co">// example height for each set of bars (FastText + Langdetect for a language)</span></span>
<span id="cb6-213"><a href="#cb6-213" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> barSpacing <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>  <span class="co">// space between each set of bars</span></span>
<span id="cb6-214"><a href="#cb6-214" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> calculatedHeight <span class="op">=</span> data<span class="op">.</span><span class="at">length</span> <span class="op">*</span> (barHeight <span class="op">+</span> barSpacing) <span class="op">+</span> margin<span class="op">.</span><span class="at">top</span> <span class="op">+</span> margin<span class="op">.</span><span class="at">bottom</span><span class="op">;</span></span>
<span id="cb6-215"><a href="#cb6-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-216"><a href="#cb6-216" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> svgHeight <span class="op">=</span> calculatedHeight<span class="op">;</span>  <span class="co">// use calculated height instead of fixed height</span></span>
<span id="cb6-217"><a href="#cb6-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-218"><a href="#cb6-218" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> width <span class="op">=</span> svgWidth <span class="op">-</span> margin<span class="op">.</span><span class="at">left</span> <span class="op">-</span> margin<span class="op">.</span><span class="at">right</span><span class="op">;</span></span>
<span id="cb6-219"><a href="#cb6-219" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> height <span class="op">=</span> svgHeight <span class="op">-</span> margin<span class="op">.</span><span class="at">top</span> <span class="op">-</span> margin<span class="op">.</span><span class="at">bottom</span><span class="op">;</span></span>
<span id="cb6-220"><a href="#cb6-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-221"><a href="#cb6-221" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> x0 <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleBand</span>()</span>
<span id="cb6-222"><a href="#cb6-222" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">domain</span>(data<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Language_ID</span>))</span>
<span id="cb6-223"><a href="#cb6-223" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">rangeRound</span>([margin<span class="op">.</span><span class="at">left</span><span class="op">,</span> width <span class="op">-</span> margin<span class="op">.</span><span class="at">right</span>])</span>
<span id="cb6-224"><a href="#cb6-224" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">paddingInner</span>(<span class="fl">0.1</span>)<span class="op">;</span></span>
<span id="cb6-225"><a href="#cb6-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-226"><a href="#cb6-226" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> x1 <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleBand</span>()</span>
<span id="cb6-227"><a href="#cb6-227" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">domain</span>([<span class="st">'FastText'</span><span class="op">,</span> <span class="st">'Langdetect'</span>])</span>
<span id="cb6-228"><a href="#cb6-228" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">rangeRound</span>([<span class="dv">0</span><span class="op">,</span> x0<span class="op">.</span><span class="fu">bandwidth</span>()])</span>
<span id="cb6-229"><a href="#cb6-229" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">padding</span>(<span class="fl">0.05</span>)<span class="op">;</span></span>
<span id="cb6-230"><a href="#cb6-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-231"><a href="#cb6-231" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> y <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb6-232"><a href="#cb6-232" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>])<span class="op">.</span><span class="fu">nice</span>()</span>
<span id="cb6-233"><a href="#cb6-233" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">rangeRound</span>([height <span class="op">-</span> margin<span class="op">.</span><span class="at">bottom</span><span class="op">,</span> margin<span class="op">.</span><span class="at">top</span>])<span class="op">;</span></span>
<span id="cb6-234"><a href="#cb6-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-235"><a href="#cb6-235" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> color <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleOrdinal</span>()</span>
<span id="cb6-236"><a href="#cb6-236" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">domain</span>([<span class="st">'FastText'</span><span class="op">,</span> <span class="st">'Langdetect'</span>])</span>
<span id="cb6-237"><a href="#cb6-237" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">range</span>([<span class="st">'#1f77b4'</span><span class="op">,</span> <span class="st">'#ff7f0e'</span>])<span class="op">;</span></span>
<span id="cb6-238"><a href="#cb6-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-239"><a href="#cb6-239" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> xAxis <span class="op">=</span> g <span class="kw">=&gt;</span> g</span>
<span id="cb6-240"><a href="#cb6-240" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(0,</span><span class="sc">${</span>height <span class="op">-</span> margin<span class="op">.</span><span class="at">bottom</span><span class="sc">}</span><span class="vs">)`</span>)</span>
<span id="cb6-241"><a href="#cb6-241" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisBottom</span>(x0)<span class="op">.</span><span class="fu">tickSizeOuter</span>(<span class="dv">0</span>))</span>
<span id="cb6-242"><a href="#cb6-242" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(g <span class="kw">=&gt;</span> g<span class="op">.</span><span class="fu">select</span>(<span class="st">".domain"</span>)<span class="op">.</span><span class="fu">remove</span>())<span class="op">;</span></span>
<span id="cb6-243"><a href="#cb6-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-244"><a href="#cb6-244" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> yAxis <span class="op">=</span> g <span class="kw">=&gt;</span> g</span>
<span id="cb6-245"><a href="#cb6-245" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(</span><span class="sc">${</span>margin<span class="op">.</span><span class="at">left</span><span class="sc">}</span><span class="vs">,0)`</span>)</span>
<span id="cb6-246"><a href="#cb6-246" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisLeft</span>(y)<span class="op">.</span><span class="fu">ticks</span>(<span class="kw">null</span><span class="op">,</span> <span class="st">"s"</span>))</span>
<span id="cb6-247"><a href="#cb6-247" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(g <span class="kw">=&gt;</span> g<span class="op">.</span><span class="fu">select</span>(<span class="st">".domain"</span>)<span class="op">.</span><span class="fu">remove</span>())<span class="op">;</span></span>
<span id="cb6-248"><a href="#cb6-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-249"><a href="#cb6-249" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> svg <span class="op">=</span> container<span class="op">.</span><span class="fu">append</span>(<span class="st">"svg"</span>)</span>
<span id="cb6-250"><a href="#cb6-250" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> svgWidth)</span>
<span id="cb6-251"><a href="#cb6-251" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> svgHeight)</span>
<span id="cb6-252"><a href="#cb6-252" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-bottom"</span><span class="op">,</span> <span class="st">"10px"</span>)<span class="op">;</span>  <span class="co">// Reduce space below the SVG</span></span>
<span id="cb6-253"><a href="#cb6-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-254"><a href="#cb6-254" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> title <span class="op">=</span> <span class="st">"Accuracy Comparison: FastText vs. Langdetect"</span><span class="op">;</span>  <span class="co">// Replace with your desired title</span></span>
<span id="cb6-255"><a href="#cb6-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-256"><a href="#cb6-256" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb6-257"><a href="#cb6-257" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> svgWidth <span class="op">/</span> <span class="dv">2</span>)          <span class="co">// Center the text</span></span>
<span id="cb6-258"><a href="#cb6-258" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> margin<span class="op">.</span><span class="at">top</span> <span class="op">/</span> <span class="dv">2</span>)        <span class="co">// Position it at the top, within the top margin</span></span>
<span id="cb6-259"><a href="#cb6-259" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)    <span class="co">// Ensure the text is centered at the position</span></span>
<span id="cb6-260"><a href="#cb6-260" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="st">"20px"</span>)       <span class="co">// Set font size</span></span>
<span id="cb6-261"><a href="#cb6-261" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)     <span class="co">// Make it bold</span></span>
<span id="cb6-262"><a href="#cb6-262" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">text</span>(title)<span class="op">;</span></span>
<span id="cb6-263"><a href="#cb6-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-264"><a href="#cb6-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-265"><a href="#cb6-265" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Tooltip</span></span>
<span id="cb6-266"><a href="#cb6-266" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> tooltip <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="st">"body"</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">"div"</span>)</span>
<span id="cb6-267"><a href="#cb6-267" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"tooltip"</span>)</span>
<span id="cb6-268"><a href="#cb6-268" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb6-269"><a href="#cb6-269" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"white"</span>)</span>
<span id="cb6-270"><a href="#cb6-270" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"border"</span><span class="op">,</span> <span class="st">"solid"</span>)</span>
<span id="cb6-271"><a href="#cb6-271" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"border-width"</span><span class="op">,</span> <span class="st">"2px"</span>)</span>
<span id="cb6-272"><a href="#cb6-272" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"border-radius"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb6-273"><a href="#cb6-273" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"padding"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb6-274"><a href="#cb6-274" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"position"</span><span class="op">,</span> <span class="st">"absolute"</span>)<span class="op">;</span></span>
<span id="cb6-275"><a href="#cb6-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-276"><a href="#cb6-276" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> barGroups <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb6-277"><a href="#cb6-277" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb6-278"><a href="#cb6-278" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(data)</span>
<span id="cb6-279"><a href="#cb6-279" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)</span>
<span id="cb6-280"><a href="#cb6-280" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"barGroup"</span>)</span>
<span id="cb6-281"><a href="#cb6-281" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`translate(</span><span class="sc">${</span><span class="fu">x0</span>(d<span class="op">.</span><span class="at">Language_ID</span>)<span class="sc">}</span><span class="vs">,0)`</span>)<span class="op">;</span></span>
<span id="cb6-282"><a href="#cb6-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-283"><a href="#cb6-283" aria-hidden="true" tabindex="-1"></a>    barGroups<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"rect"</span>)</span>
<span id="cb6-284"><a href="#cb6-284" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(d <span class="kw">=&gt;</span> [<span class="st">'FastText'</span><span class="op">,</span> <span class="st">'Langdetect'</span>]<span class="op">.</span><span class="fu">map</span>(key <span class="kw">=&gt;</span> ({ key<span class="op">,</span> <span class="dt">value</span><span class="op">:</span> d[key] })))</span>
<span id="cb6-285"><a href="#cb6-285" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">join</span>(<span class="st">"rect"</span>)</span>
<span id="cb6-286"><a href="#cb6-286" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">x1</span>(d<span class="op">.</span><span class="at">key</span>))</span>
<span id="cb6-287"><a href="#cb6-287" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">value</span>))</span>
<span id="cb6-288"><a href="#cb6-288" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> x1<span class="op">.</span><span class="fu">bandwidth</span>())</span>
<span id="cb6-289"><a href="#cb6-289" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">y</span>(<span class="dv">0</span>) <span class="op">-</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">value</span>))</span>
<span id="cb6-290"><a href="#cb6-290" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">color</span>(d<span class="op">.</span><span class="at">key</span>))</span>
<span id="cb6-291"><a href="#cb6-291" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseover"</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span><span class="op">,</span> d) {</span>
<span id="cb6-292"><a href="#cb6-292" aria-hidden="true" tabindex="-1"></a>            <span class="kw">const</span> originalColor <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span>)<span class="op">;</span></span>
<span id="cb6-293"><a href="#cb6-293" aria-hidden="true" tabindex="-1"></a>            d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb6-294"><a href="#cb6-294" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"data-original-color"</span><span class="op">,</span> originalColor)  <span class="co">// Store the original color</span></span>
<span id="cb6-295"><a href="#cb6-295" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">rgb</span>(originalColor)<span class="op">.</span><span class="fu">darker</span>(<span class="dv">2</span>))<span class="op">;</span></span>
<span id="cb6-296"><a href="#cb6-296" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb6-297"><a href="#cb6-297" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">duration</span>(<span class="dv">200</span>)</span>
<span id="cb6-298"><a href="#cb6-298" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="op">.</span><span class="dv">9</span>)<span class="op">;</span></span>
<span id="cb6-299"><a href="#cb6-299" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">.</span><span class="fu">html</span>(d<span class="op">.</span><span class="at">key</span> <span class="op">+</span> <span class="st">": "</span> <span class="op">+</span> d<span class="op">.</span><span class="at">value</span> <span class="op">+</span> <span class="st">"%"</span>)</span>
<span id="cb6-300"><a href="#cb6-300" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">style</span>(<span class="st">"left"</span><span class="op">,</span> (<span class="bu">event</span><span class="op">.</span><span class="at">pageX</span> <span class="op">+</span> <span class="dv">5</span>) <span class="op">+</span> <span class="st">"px"</span>)</span>
<span id="cb6-301"><a href="#cb6-301" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">style</span>(<span class="st">"top"</span><span class="op">,</span> (<span class="bu">event</span><span class="op">.</span><span class="at">pageY</span> <span class="op">-</span> <span class="dv">28</span>) <span class="op">+</span> <span class="st">"px"</span>)<span class="op">;</span></span>
<span id="cb6-302"><a href="#cb6-302" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb6-303"><a href="#cb6-303" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseout"</span><span class="op">,</span> <span class="kw">function</span>(d) {</span>
<span id="cb6-304"><a href="#cb6-304" aria-hidden="true" tabindex="-1"></a>            <span class="kw">const</span> originalColor <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"data-original-color"</span>)<span class="op">;</span></span>
<span id="cb6-305"><a href="#cb6-305" aria-hidden="true" tabindex="-1"></a>            d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb6-306"><a href="#cb6-306" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> originalColor)  <span class="co">// Reset to the original color</span></span>
<span id="cb6-307"><a href="#cb6-307" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"data-original-color"</span><span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span>  <span class="co">// Clear the data attribute</span></span>
<span id="cb6-308"><a href="#cb6-308" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb6-309"><a href="#cb6-309" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">duration</span>(<span class="dv">500</span>)</span>
<span id="cb6-310"><a href="#cb6-310" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb6-311"><a href="#cb6-311" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb6-312"><a href="#cb6-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-313"><a href="#cb6-313" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb6-314"><a href="#cb6-314" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(xAxis)<span class="op">;</span></span>
<span id="cb6-315"><a href="#cb6-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-316"><a href="#cb6-316" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb6-317"><a href="#cb6-317" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(yAxis)<span class="op">;</span></span>
<span id="cb6-318"><a href="#cb6-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-319"><a href="#cb6-319" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Sorting functions</span></span>
<span id="cb6-320"><a href="#cb6-320" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">sortByFastText</span>() {</span>
<span id="cb6-321"><a href="#cb6-321" aria-hidden="true" tabindex="-1"></a>        data<span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> b<span class="op">.</span><span class="at">FastText</span> <span class="op">-</span> a<span class="op">.</span><span class="at">FastText</span>)<span class="op">;</span></span>
<span id="cb6-322"><a href="#cb6-322" aria-hidden="true" tabindex="-1"></a>        x0<span class="op">.</span><span class="fu">domain</span>(data<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Language_ID</span>))<span class="op">;</span></span>
<span id="cb6-323"><a href="#cb6-323" aria-hidden="true" tabindex="-1"></a>        svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".barGroup"</span>)<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">duration</span>(<span class="dv">1000</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`translate(</span><span class="sc">${</span><span class="fu">x0</span>(d<span class="op">.</span><span class="at">Language_ID</span>)<span class="sc">}</span><span class="vs">,0)`</span>)<span class="op">;</span></span>
<span id="cb6-324"><a href="#cb6-324" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb6-325"><a href="#cb6-325" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Update button styles</span></span>
<span id="cb6-326"><a href="#cb6-326" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>() { <span class="cf">return</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">text</span>() <span class="op">===</span> <span class="st">"Sort by FastText"</span><span class="op">;</span> })<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="fu">color</span>(<span class="st">'FastText'</span>))<span class="op">;</span></span>
<span id="cb6-327"><a href="#cb6-327" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>() { <span class="cf">return</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">text</span>() <span class="op">===</span> <span class="st">"Sort by Langdetect"</span><span class="op">;</span> })<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#f4f4f4"</span>)<span class="op">;</span></span>
<span id="cb6-328"><a href="#cb6-328" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-329"><a href="#cb6-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-330"><a href="#cb6-330" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">sortByLangdetect</span>() {</span>
<span id="cb6-331"><a href="#cb6-331" aria-hidden="true" tabindex="-1"></a>        data<span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> b<span class="op">.</span><span class="at">Langdetect</span> <span class="op">-</span> a<span class="op">.</span><span class="at">Langdetect</span>)<span class="op">;</span></span>
<span id="cb6-332"><a href="#cb6-332" aria-hidden="true" tabindex="-1"></a>        x0<span class="op">.</span><span class="fu">domain</span>(data<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Language_ID</span>))<span class="op">;</span></span>
<span id="cb6-333"><a href="#cb6-333" aria-hidden="true" tabindex="-1"></a>        svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".barGroup"</span>)<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">duration</span>(<span class="dv">1000</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`translate(</span><span class="sc">${</span><span class="fu">x0</span>(d<span class="op">.</span><span class="at">Language_ID</span>)<span class="sc">}</span><span class="vs">,0)`</span>)<span class="op">;</span></span>
<span id="cb6-334"><a href="#cb6-334" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb6-335"><a href="#cb6-335" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Update button styles</span></span>
<span id="cb6-336"><a href="#cb6-336" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>() { <span class="cf">return</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">text</span>() <span class="op">===</span> <span class="st">"Sort by Langdetect"</span><span class="op">;</span> })<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="fu">color</span>(<span class="st">'Langdetect'</span>))<span class="op">;</span></span>
<span id="cb6-337"><a href="#cb6-337" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>() { <span class="cf">return</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">text</span>() <span class="op">===</span> <span class="st">"Sort by FastText"</span><span class="op">;</span> })<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#f4f4f4"</span>)<span class="op">;</span></span>
<span id="cb6-338"><a href="#cb6-338" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-339"><a href="#cb6-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-340"><a href="#cb6-340" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Styling function for buttons</span></span>
<span id="cb6-341"><a href="#cb6-341" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">styleButton</span>(button) {</span>
<span id="cb6-342"><a href="#cb6-342" aria-hidden="true" tabindex="-1"></a>        button<span class="op">.</span><span class="fu">style</span>(<span class="st">"padding"</span><span class="op">,</span> <span class="st">"5px 10px"</span>)</span>
<span id="cb6-343"><a href="#cb6-343" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb6-344"><a href="#cb6-344" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"cursor"</span><span class="op">,</span> <span class="st">"pointer"</span>)</span>
<span id="cb6-345"><a href="#cb6-345" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"border"</span><span class="op">,</span> <span class="st">"1px solid #888"</span>)</span>
<span id="cb6-346"><a href="#cb6-346" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#f4f4f4"</span>)</span>
<span id="cb6-347"><a href="#cb6-347" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"border-radius"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb6-348"><a href="#cb6-348" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-align"</span><span class="op">,</span> <span class="st">"center"</span>)</span>
<span id="cb6-349"><a href="#cb6-349" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseover"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb6-350"><a href="#cb6-350" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">const</span> currentColor <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span>)<span class="op">;</span></span>
<span id="cb6-351"><a href="#cb6-351" aria-hidden="true" tabindex="-1"></a>                  <span class="cf">if</span> (currentColor <span class="op">===</span> <span class="st">"rgb(244, 244, 244)"</span>) {  <span class="co">// Check if the current color is the default</span></span>
<span id="cb6-352"><a href="#cb6-352" aria-hidden="true" tabindex="-1"></a>                      d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#e0e0e0"</span>)<span class="op">;</span></span>
<span id="cb6-353"><a href="#cb6-353" aria-hidden="true" tabindex="-1"></a>                  }</span>
<span id="cb6-354"><a href="#cb6-354" aria-hidden="true" tabindex="-1"></a>              })</span>
<span id="cb6-355"><a href="#cb6-355" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseout"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb6-356"><a href="#cb6-356" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">const</span> currentColor <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span>)<span class="op">;</span></span>
<span id="cb6-357"><a href="#cb6-357" aria-hidden="true" tabindex="-1"></a>                  <span class="cf">if</span> (currentColor <span class="op">===</span> <span class="st">"rgb(224, 224, 224)"</span>) {  <span class="co">// Check if the color was changed on hover</span></span>
<span id="cb6-358"><a href="#cb6-358" aria-hidden="true" tabindex="-1"></a>                      d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#f4f4f4"</span>)<span class="op">;</span></span>
<span id="cb6-359"><a href="#cb6-359" aria-hidden="true" tabindex="-1"></a>                  }</span>
<span id="cb6-360"><a href="#cb6-360" aria-hidden="true" tabindex="-1"></a>              })<span class="op">;</span></span>
<span id="cb6-361"><a href="#cb6-361" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-362"><a href="#cb6-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-363"><a href="#cb6-363" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add sort buttons</span></span>
<span id="cb6-364"><a href="#cb6-364" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sortButtons <span class="op">=</span> container<span class="op">.</span><span class="fu">append</span>(<span class="st">"div"</span>)</span>
<span id="cb6-365"><a href="#cb6-365" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-bottom"</span><span class="op">,</span> <span class="st">"5px"</span>)  <span class="co">// Reduce space below the sort buttons</span></span>
<span id="cb6-366"><a href="#cb6-366" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-align"</span><span class="op">,</span> <span class="st">"left"</span>)<span class="op">;</span>   <span class="co">// Ensure left alignment</span></span>
<span id="cb6-367"><a href="#cb6-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-368"><a href="#cb6-368" aria-hidden="true" tabindex="-1"></a>    <span class="fu">styleButton</span>(sortButtons<span class="op">.</span><span class="fu">append</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">text</span>(<span class="st">"Sort by FastText"</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> sortByFastText))<span class="op">;</span></span>
<span id="cb6-369"><a href="#cb6-369" aria-hidden="true" tabindex="-1"></a>    <span class="fu">styleButton</span>(sortButtons<span class="op">.</span><span class="fu">append</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">text</span>(<span class="st">"Sort by Langdetect"</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> sortByLangdetect))<span class="op">;</span></span>
<span id="cb6-370"><a href="#cb6-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-371"><a href="#cb6-371" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Interactive Legends</span></span>
<span id="cb6-372"><a href="#cb6-372" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> legend <span class="op">=</span> container<span class="op">.</span><span class="fu">append</span>(<span class="st">"div"</span>)</span>
<span id="cb6-373"><a href="#cb6-373" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"legend"</span>)</span>
<span id="cb6-374"><a href="#cb6-374" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"display"</span><span class="op">,</span> <span class="st">"flex"</span>)</span>
<span id="cb6-375"><a href="#cb6-375" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"justify-content"</span><span class="op">,</span> <span class="st">"flex-start"</span>)  <span class="co">// Align the legend to the left</span></span>
<span id="cb6-376"><a href="#cb6-376" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-bottom"</span><span class="op">,</span> <span class="st">"10px"</span>)<span class="op">;</span>  <span class="co">// Add some space below the legends for clarity</span></span>
<span id="cb6-377"><a href="#cb6-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-378"><a href="#cb6-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-379"><a href="#cb6-379" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> tools <span class="op">=</span> [<span class="st">'FastText'</span><span class="op">,</span> <span class="st">'Langdetect'</span>]<span class="op">;</span></span>
<span id="cb6-380"><a href="#cb6-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-381"><a href="#cb6-381" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">.</span><span class="fu">forEach</span>(tool <span class="kw">=&gt;</span> {</span>
<span id="cb6-382"><a href="#cb6-382" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> legendButton <span class="op">=</span> legend<span class="op">.</span><span class="fu">append</span>(<span class="st">"div"</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"margin"</span><span class="op">,</span> <span class="st">"0 10px"</span>)<span class="op">;</span></span>
<span id="cb6-383"><a href="#cb6-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-384"><a href="#cb6-384" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> colorBox <span class="op">=</span> legendButton<span class="op">.</span><span class="fu">append</span>(<span class="st">"span"</span>)</span>
<span id="cb6-385"><a href="#cb6-385" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="fu">color</span>(tool))</span>
<span id="cb6-386"><a href="#cb6-386" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"width"</span><span class="op">,</span> <span class="st">"20px"</span>)</span>
<span id="cb6-387"><a href="#cb6-387" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"height"</span><span class="op">,</span> <span class="st">"20px"</span>)</span>
<span id="cb6-388"><a href="#cb6-388" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"display"</span><span class="op">,</span> <span class="st">"inline-block"</span>)</span>
<span id="cb6-389"><a href="#cb6-389" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-right"</span><span class="op">,</span> <span class="st">"5px"</span>)<span class="op">;</span></span>
<span id="cb6-390"><a href="#cb6-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-391"><a href="#cb6-391" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> toolName <span class="op">=</span> legendButton<span class="op">.</span><span class="fu">append</span>(<span class="st">"span"</span>)</span>
<span id="cb6-392"><a href="#cb6-392" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">text</span>(tool)</span>
<span id="cb6-393"><a href="#cb6-393" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"cursor"</span><span class="op">,</span> <span class="st">"pointer"</span>)</span>
<span id="cb6-394"><a href="#cb6-394" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb6-395"><a href="#cb6-395" aria-hidden="true" tabindex="-1"></a>                <span class="kw">const</span> isActive <span class="op">=</span> <span class="op">!</span>d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">classed</span>(<span class="st">"inactive"</span>)<span class="op">;</span></span>
<span id="cb6-396"><a href="#cb6-396" aria-hidden="true" tabindex="-1"></a>                d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">classed</span>(<span class="st">"inactive"</span><span class="op">,</span> isActive)<span class="op">;</span></span>
<span id="cb6-397"><a href="#cb6-397" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb6-398"><a href="#cb6-398" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> (isActive) {</span>
<span id="cb6-399"><a href="#cb6-399" aria-hidden="true" tabindex="-1"></a>                    colorBox<span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="st">"0.5"</span>)<span class="op">;</span></span>
<span id="cb6-400"><a href="#cb6-400" aria-hidden="true" tabindex="-1"></a>                    toolName<span class="op">.</span><span class="fu">style</span>(<span class="st">"text-decoration"</span><span class="op">,</span> <span class="st">"line-through"</span>)<span class="op">;</span></span>
<span id="cb6-401"><a href="#cb6-401" aria-hidden="true" tabindex="-1"></a>                } <span class="cf">else</span> {</span>
<span id="cb6-402"><a href="#cb6-402" aria-hidden="true" tabindex="-1"></a>                    colorBox<span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="st">"1"</span>)<span class="op">;</span></span>
<span id="cb6-403"><a href="#cb6-403" aria-hidden="true" tabindex="-1"></a>                    toolName<span class="op">.</span><span class="fu">style</span>(<span class="st">"text-decoration"</span><span class="op">,</span> <span class="st">"none"</span>)<span class="op">;</span></span>
<span id="cb6-404"><a href="#cb6-404" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb6-405"><a href="#cb6-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-406"><a href="#cb6-406" aria-hidden="true" tabindex="-1"></a>                svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".barGroup"</span>)</span>
<span id="cb6-407"><a href="#cb6-407" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"rect"</span>)</span>
<span id="cb6-408"><a href="#cb6-408" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">key</span> <span class="op">===</span> tool)</span>
<span id="cb6-409"><a href="#cb6-409" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb6-410"><a href="#cb6-410" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">duration</span>(<span class="dv">300</span>)</span>
<span id="cb6-411"><a href="#cb6-411" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> isActive <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb6-412"><a href="#cb6-412" aria-hidden="true" tabindex="-1"></a>            })<span class="op">;</span></span>
<span id="cb6-413"><a href="#cb6-413" aria-hidden="true" tabindex="-1"></a>            <span class="fu">styleButton</span>(legendButton)<span class="op">;</span></span>
<span id="cb6-414"><a href="#cb6-414" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span>  </span>
<span id="cb6-415"><a href="#cb6-415" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb6-416"><a href="#cb6-416" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
</section>
</section>
<section id="workflow-method-description" class="level2">
<h2 class="anchored" data-anchor-id="workflow-method-description">Workflow / Method description</h2>
<p>Below is a very early attempt at generative content based on the generated <a href="http://130.216.217.137:8080/#WEP.json" style="color: green;">Workflow Execution Plan</a> (WEP). The WEP only provides a description of the Globus flow, and includes no information regarding the actual execution of the method. Including details from the Workflow Execution Description (WED) can further enhance the description including things like execution state (succeeded, failed), time taken per step, and other pertinent information.</p>
<ul>
<li>Model: GPT-4</li>
<li>Prompt: Generate a description of this workflow, from the perspective of an academic methodological section: <a href="http://130.216.217.137:8080/#WEP.json" style="color: green;">WEP</a></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Generative Content
</div>
</div>
<div class="callout-body-container callout-body">
<p>The methodology to compare the performance of two language identification models, fastText and langdetect, involves the execution of a series of actions within a structured workflow. The actions range from data transfer operations to the execution of language identification models and statistical analysis of the generated results. The overall flow is organized as follows:</p>
<ol type="1">
<li><p><a href="http://130.216.217.137:8080/#DS_fastText_Transfer.py" style="color: green;"><strong>Data Transfer for fastText Model</strong></a>: The process begins by transferring the required dataset from the data store to the location accessible by the fastText model. This is done using Globus, a high-speed data transfer protocol. The specific parameters of this operation such as the source and destination endpoint identifiers, along with the respective paths are supplied at runtime.</p></li>
<li><p><a href="http://130.216.217.137:8080/#fastText.py" style="color: green;"><strong>fastText Model Execution</strong></a>: With the data in place, the fastText language identification model is executed. The model reads the input data from the path specified in the previous step, performs language identification, and stores the result in the same location.</p></li>
<li><p><a href="http://130.216.217.137:8080/#fastText_statistics_transfer.py" style="color: green;"><strong>Result Transfer for fastText Model</strong></a>: The output of the fastText model, including statistics related to its performance, is then transferred back to the data store via another Globus transfer operation.</p></li>
<li><p><a href="http://130.216.217.137:8080/#DS_langDetect_transfer.py" style="color: green;"><strong>Data Transfer for langdetect Model</strong></a>: Similarly to step 1, the required dataset is transferred from the data store to the location accessible by the langdetect model using a Globus transfer operation.</p></li>
<li><p><a href="http://130.216.217.137:8080/#langdetect.py" style="color: green;"><strong>langdetect Model Execution</strong></a>: The langdetect model is then executed, processing the transferred data to perform language identification. The results of the model are stored in the designated location.</p></li>
<li><p><a href="http://130.216.217.137:8080/#langdetect_statistics_transfer.py" style="color: green;"><strong>Result Transfer for langdetect Model</strong></a>: The results of the langdetect model, including its performance statistics, are then transferred back to the data store via Globus transfer operation.</p></li>
<li><p><a href="(http://130.216.217.137:8080/#statistics.py" style="color: green;"><strong>Statistical Analysis</strong></a>: With the results from both models in place, a statistical analysis is performed to compare their performances. The analysis includes accuracy statistics, and the generation of figures, tables, and other representations of the results for presentation in the publication layer.</p></li>
<li><p><a href="(http://130.216.217.137:8080/#statistics_DS_transfer.py" style="color: green;"><strong>Statistics Transfer to the Data Store</strong></a>: Finally, the results of the statistical analysis are transferred back to the data store using another Globus transfer operation.</p></li>
</ol>
<p>Each of these operations is executed asynchronously, with designated wait times to ensure the completion of each task before moving to the next. The process has been designed for scalability and efficiency, with a focus on managing data and computational resources effectively.</p>
</div>
</div>
<section id="method-description-generation-experiement" class="level3">
<h3 class="anchored" data-anchor-id="method-description-generation-experiement">Method description generation experiement</h3>
<p>Each LPAP contains a method directory including the docker image and associated scripts. Using these, we can attempt to generate descriptions of the method in NL. This is an early experiement into the performance/accuracy of such a method.</p>
<section id="fasttext-lpap" class="level4">
<h4 class="anchored" data-anchor-id="fasttext-lpap">FastText LPAP</h4>
<p><a href="#dnldts50242" onclick="fetch('data:application/x-python;base64,aW1wb3J0IG9zCmltcG9ydCBmYXN0dGV4dAppbXBvcnQgY29kZWNzIAppbXBvcnQgc3lzCgojIERpcmVjdG9yeSBjb25zdGFudHMKQkFTRV9ESVIgPSBvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5hYnNwYXRoKF9fZmlsZV9fKSkKSU5QVVRfRElSID0gb3MuZW52aXJvbi5nZXQoIklOUFVUX0RJUiIsIG9zLnBhdGguam9pbihCQVNFX0RJUiwgImlucHV0IikpICAKT1VUUFVUX0RJUiA9IG9zLmVudmlyb24uZ2V0KCJPVVRQVVRfRElSIiwgb3MucGF0aC5qb2luKEJBU0VfRElSLCAib3V0cHV0IikpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgCiAgICB3aXRoIGNvZGVjcy5vcGVuKHN5cy5hcmd2WzFdLCAiciIsIGVuY29kaW5nID0gInV0Zi04IikgYXMgZjoKICAgICAgICBsaW5lcyA9IGYucmVhZGxpbmVzKCkKCiAgICAjTElEMiBDb25zdGFudHMKICAgIG1vZGVsID0gZmFzdHRleHQubG9hZF9tb2RlbCgibW9kZWwubGlkLnRvcDgwMC5lcG9jaDIwLm5lZzEwMC5kaW0xMDAubnMuc21hbGwubWluNS5mdHoiKQoKICAgIHByZWRpY3Rpb25zID0gW10KICAgIGZvciBsaW5lIGluIG9wZW4oc3lzLmFyZ3ZbMV0pOgogICAgICAgICMgc3RyaXAgXG4gZnJvbSBsaW5lCiAgICAgICAgbGluZSA9IGxpbmUucnN0cmlwKCJcbiIpCiAgICAgICAgcHJlZF9sYWJlbCA9IG1vZGVsLnByZWRpY3QobGluZSkKICAgICAgICBwcmVkaWN0aW9ucy5hcHBlbmQocHJlZF9sYWJlbCkKCiAgICAjIHdyaXRlIHByZWRpY3Rpb25zIHRvIGZpbGUKICAgIHdpdGggb3BlbihmIntPVVRQVVRfRElSfS9mYXN0VGV4dF9wcmVkaWN0aW9ucy50eHQiLCAidyIpIGFzIGY6CiAgICAgICAgZm9yIHByZWQgaW4gcHJlZGljdGlvbnM6CiAgICAgICAgICAgICMgV3JpdGUgcHJlZGljdGlvbiB0byBmaWxlLCBhbmQgcmVtb3ZlIF9fbGFiZWxfXyBwcmVmaXgKICAgICAgICAgICAgZi53cml0ZShwcmVkWzBdWzBdLnJlcGxhY2UoIl9fbGFiZWxfXyIsICIiKSArICJcbiIpCg==').then(res => res.blob()).then(blob => {
      const downloadURL = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      document.body.appendChild(a);
      a.href = downloadURL;
      a.download = 'fastText.py'; a.click();
      window.URL.revokeObjectURL(downloadURL);
      document.body.removeChild(a);
        });"><button class="btn btn-info downloadthis  " id="dnldts50242"><i class="bi bi-filetype-py"></i> Download the script </button></a></p>
<div data-add-from="orchestration_crate/fastText_lpap/method_resources/computation_docker/main.py">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode py code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> fasttext</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> codecs </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Directory constants</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>BASE_DIR <span class="op">=</span> os.path.dirname(os.path.abspath(<span class="va">__file__</span>))</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>INPUT_DIR <span class="op">=</span> os.environ.get(<span class="st">"INPUT_DIR"</span>, os.path.join(BASE_DIR, <span class="st">"input"</span>))  </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>OUTPUT_DIR <span class="op">=</span> os.environ.get(<span class="st">"OUTPUT_DIR"</span>, os.path.join(BASE_DIR, <span class="st">"output"</span>))</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> codecs.<span class="bu">open</span>(sys.argv[<span class="dv">1</span>], <span class="st">"r"</span>, encoding <span class="op">=</span> <span class="st">"utf-8"</span>) <span class="im">as</span> f:</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        lines <span class="op">=</span> f.readlines()</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">#LID2 Constants</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> fasttext.load_model(<span class="st">"model.lid.top800.epoch20.neg100.dim100.ns.small.min5.ftz"</span>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    predictions <span class="op">=</span> []</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> <span class="bu">open</span>(sys.argv[<span class="dv">1</span>]):</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># strip \n from line</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>        line <span class="op">=</span> line.rstrip(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>        pred_label <span class="op">=</span> model.predict(line)</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>        predictions.append(pred_label)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># write predictions to file</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="ss">f"</span><span class="sc">{</span>OUTPUT_DIR<span class="sc">}</span><span class="ss">/fastText_predictions.txt"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> pred <span class="kw">in</span> predictions:</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Write prediction to file, and remove __label__ prefix</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>            f.write(pred[<span class="dv">0</span>][<span class="dv">0</span>].replace(<span class="st">"__label__"</span>, <span class="st">""</span>) <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Generative Content
</div>
</div>
<div class="callout-body-container callout-body">
<p>FastText is a library for text classification and representation learning, created by Facebook’s AI Research lab. This script loads a FastText model trained to classify text and then uses this model to predict the class of each line of an input text file.</p>
<p>Here’s a step-by-step breakdown:</p>
<ol type="1">
<li>The script begins by setting up necessary directories. The base directory (<code>BASE_DIR</code>) is set as the directory where this script is located. <code>INPUT_DIR</code> and <code>OUTPUT_DIR</code> are then defined as subdirectories of the base directory.</li>
<li>In the main execution block (<code>if name == "main":</code>), the script first opens an input file (<code>sys.argv[1]</code>) with read access using the codecs library, which allows the script to handle text encoded in UTF-8. The content of the file is read line by line into the lines variable.</li>
<li>A pre-trained FastText model is loaded from a file named <code>model.lid.top800.epoch20.neg100.dim100.ns.small.min5.ftz</code>. This model is trained to predict the class of a line of text.</li>
<li>The script then iterates through each line in the input file again. For each line, any newline character () at the end of the line is removed using <code>rstrip("")</code>. The cleaned line is then fed to the FastText model to generate a prediction. Each prediction is appended to the predictions list.</li>
<li>Finally, all the predictions are written to a file in the output directory named <code>fastText_predictions.txt</code>. Each prediction is written on a new line, with any “label” prefix removed.</li>
</ol>
<p>In the context of the workflow, this script follows the DS_fastText_Transfer state where the necessary files are transferred to the appropriate location. The output of this script, fastText_predictions.txt, is used in the final statistics state of the workflow to compute accuracy statistics.</p>
</div>
</div>
</section>
<section id="langdetect-lpap" class="level4">
<h4 class="anchored" data-anchor-id="langdetect-lpap">langdetect LPAP</h4>
<p><a href="#dnldts12467" onclick="fetch('data:application/x-python;base64,ZnJvbSBsYW5nZGV0ZWN0IGltcG9ydCBEZXRlY3RvckZhY3RvcnksIGRldGVjdCwgZGV0ZWN0X2xhbmdzCmltcG9ydCBvcwppbXBvcnQgY29kZWNzIAppbXBvcnQgc3lzCgojIERpcmVjdG9yeSBjb25zdGFudHMKQkFTRV9ESVIgPSBvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5hYnNwYXRoKF9fZmlsZV9fKSkKSU5QVVRfRElSID0gb3MuZW52aXJvbi5nZXQoIklOUFVUX0RJUiIsIG9zLnBhdGguam9pbihCQVNFX0RJUiwgImlucHV0IikpICAKT1VUUFVUX0RJUiA9IG9zLmVudmlyb24uZ2V0KCJPVVRQVVRfRElSIiwgb3MucGF0aC5qb2luKEJBU0VfRElSLCAib3V0cHV0IikpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgCiAgICAjIFJlYWQgaW5wdXQgbGluZXMKICAgIHdpdGggY29kZWNzLm9wZW4oc3lzLmFyZ3ZbMV0sICJyIiwgZW5jb2RpbmcgPSAidXRmLTgiKSBhcyBmOgogICAgICAgIGxpbmVzID0gZi5yZWFkbGluZXMoKQoKICAgICMgV3JpdGUgcHJlZGljdGlvbnMgdG8gZmlsZQogICAgd2l0aCBvcGVuKGYie09VVFBVVF9ESVJ9L2xhbmdkZXRlY3RfcHJlZGljdGlvbnMudHh0IiwgInciKSBhcyBmOgogICAgICAgIGZvciBsaW5lIGluIGxpbmVzOgogICAgICAgICAgICBsaW5lID0gbGluZS5zdHJpcCgpICAjIFJlbW92ZSBsZWFkaW5nL3RyYWlsaW5nIHdoaXRlIHNwYWNlIGluY2x1ZGluZyAnXFxuJwogICAgICAgICAgICBpZiBsaW5lOiAgIyBPbmx5IHByb2Nlc3MgdGhlIGxpbmUgaWYgaXQncyBub3QgZW1wdHkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBkZXRlY3RlZF9sYW5ndWFnZSA9IGRldGVjdChsaW5lKQogICAgICAgICAgICAgICAgICAgIGYud3JpdGUoZGV0ZWN0ZWRfbGFuZ3VhZ2UgKyAiXG4iKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICMgSW4gY2FzZSBvZiBhbiBleGNlcHRpb24sIHdyaXRlIGFuIGVycm9yIGxpbmUgd2l0aCB0aGUgbGluZSBjb250ZW50CiAgICAgICAgICAgICAgICAgICAgZi53cml0ZShmImVycm9yOiB7bGluZX0gXG4iKQogIA==').then(res => res.blob()).then(blob => {
      const downloadURL = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      document.body.appendChild(a);
      a.href = downloadURL;
      a.download = 'langdetect.py'; a.click();
      window.URL.revokeObjectURL(downloadURL);
      document.body.removeChild(a);
        });"><button class="btn btn-info downloadthis  " id="dnldts12467"><i class="bi bi-filetype-py"></i> Download the script </button></a></p>
<div data-add-from="orchestration_crate/langdetect_lpap/method_resources/computation_docker/main.py">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode py code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langdetect <span class="im">import</span> DetectorFactory, detect, detect_langs</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> codecs </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Directory constants</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>BASE_DIR <span class="op">=</span> os.path.dirname(os.path.abspath(<span class="va">__file__</span>))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>INPUT_DIR <span class="op">=</span> os.environ.get(<span class="st">"INPUT_DIR"</span>, os.path.join(BASE_DIR, <span class="st">"input"</span>))  </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>OUTPUT_DIR <span class="op">=</span> os.environ.get(<span class="st">"OUTPUT_DIR"</span>, os.path.join(BASE_DIR, <span class="st">"output"</span>))</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Read input lines</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> codecs.<span class="bu">open</span>(sys.argv[<span class="dv">1</span>], <span class="st">"r"</span>, encoding <span class="op">=</span> <span class="st">"utf-8"</span>) <span class="im">as</span> f:</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        lines <span class="op">=</span> f.readlines()</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Write predictions to file</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="ss">f"</span><span class="sc">{</span>OUTPUT_DIR<span class="sc">}</span><span class="ss">/langdetect_predictions.txt"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>            line <span class="op">=</span> line.strip()  <span class="co"># Remove leading/trailing white space including '\\n'</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> line:  <span class="co"># Only process the line if it's not empty</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>                <span class="cf">try</span>:</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>                    detected_language <span class="op">=</span> detect(line)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                    f.write(detected_language <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>                <span class="cf">except</span>:</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># In case of an exception, write an error line with the line content</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>                    f.write(<span class="ss">f"error: </span><span class="sc">{</span>line<span class="sc">}</span><span class="ss"> </span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Generative Content
</div>
</div>
<div class="callout-body-container callout-body">
<p>This Python script uses the langdetect library to determine the language of each line of text in an input file. The resulting predictions are then written to an output file.</p>
<p>Here’s a step-by-step breakdown:</p>
<ol type="1">
<li>The script sets up necessary directories. The base directory (<code>BASE_DIR</code>) is set as the directory where the script resides. The input directory (<code>INPUT_DIR</code>) and the output directory (<code>OUTPUT_DIR</code>) are then set as environment variables or default to the subdirectories “input” and “output” in the base directory, respectively.</li>
<li>In the main execution block (<code>if __name__ == "__main__":</code>), the script begins by opening an input file (<code>sys.argv[1]</code>) with read access using the codecs library, enabling it to handle UTF-8 encoded text. The contents of the file are read line by line into the variable ‘lines’.</li>
<li>An output file named “langdetect_predictions.txt” is opened or created in the output directory.</li>
<li>The script then starts processing each line in the ‘lines’ variable. It removes leading and trailing white spaces from each line. If the line is not empty, it increments a counter and tries to determine the language of the line using langdetect. The detected language or an error message (in case of failure) is then written to the output file.</li>
</ol>
<p>In the context of the workflow, this script is executed in the ‘langdetect’ state. It comes after the ‘DS_langDetect_transfer’ state, where the necessary input file is transferred to the langdetect endpoint. The output of this script, “langdetect_predictions.txt”, is then used in the ‘statistics’ state of the workflow, where the accuracy of the langdetect and fastText predictions are compared.</p>
</div>
</div>
</section>
</section>
</section>
<section id="referencing" class="level2">
<h2 class="anchored" data-anchor-id="referencing">Referencing</h2>
<p>Some narrative text which includes a reference (<span class="citation" data-cites="miller2011cipres">Miller, Pfeiffer, and Schwartz (<a href="#ref-miller2011cipres" role="doc-biblioref">2011</a>)</span>). A small list of references:</p>
<ul>
<li><span class="citation" data-cites="uhrin2021workflows">Uhrin et al. (<a href="#ref-uhrin2021workflows" role="doc-biblioref">2021</a>)</span></li>
<li><span class="citation" data-cites="goecks2010galaxy">Goecks et al. (<a href="#ref-goecks2010galaxy" role="doc-biblioref">2010</a>)</span></li>
<li><span class="citation" data-cites="vescovi2022linking">Vescovi et al. (<a href="#ref-vescovi2022linking" role="doc-biblioref">2022</a>)</span></li>
</ul>
<!-- -->

<script type="ojs-module-contents">
{"contents":[
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${accuracy_conclusion}</span>`", "cellName":"ojs-element-id-1"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${fastText_limit}</span>`", "cellName":"ojs-element-id-2"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${langdetect_limit}</span>`", "cellName":"ojs-element-id-3"}
]}
</script>

</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-goecks2010galaxy" class="csl-entry" role="listitem">
Goecks, Jeremy, Anton Nekrutenko, James Taylor, and Galaxy Team. 2010. <span>“Galaxy: A Comprehensive Approach for Supporting Accessible, Reproducible, and Transparent Computational Research in the Life Sciences.”</span> <em>Genome Biology</em> 11: 1–13.
</div>
<div id="ref-miller2011cipres" class="csl-entry" role="listitem">
Miller, Mark A, Wayne Pfeiffer, and Terri Schwartz. 2011. <span>“The CIPRES Science Gateway: A Community Resource for Phylogenetic Analyses.”</span> In <em>Proc. 2011 TeraGrid Conference: Extreme Digital Discovery</em>, 1–8.
</div>
<div id="ref-uhrin2021workflows" class="csl-entry" role="listitem">
Uhrin, Martin, Sebastiaan P Huber, Jusong Yu, Nicola Marzari, and Giovanni Pizzi. 2021. <span>“Workflows in <span>AiiDA</span>: Engineering a High-Throughput, Event-Based Engine for Robust and Modular Computational Workflows.”</span> <em>Computational Materials Science</em> 187: 110086.
</div>
<div id="ref-vescovi2022linking" class="csl-entry" role="listitem">
Vescovi, Rafael, Ryan Chard, Nickolaus D Saint, Ben Blaiszik, Jim Pruyne, Tekin Bicer, Alex Lavens, et al. 2022. <span>“Linking Scientific Instruments and Computation: Patterns, Technologies, and Experiences.”</span> <em>Patterns</em> 3 (10): 100606.
</div>
</div></section></div></main>
<!-- /main column -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"fastText_stats = FileAttachment(\"orchestration_crate/statistics_lpap/output/fastText_stats.json\").json() \nlangdetect_stats = FileAttachment(\"orchestration_crate/statistics_lpap/output/langdetect_stats.json\").json() \nfastText_acc_actual = fastText_stats[\"overall_accuracy\"] \nlangdetect_acc_actual = langdetect_stats[\"overall_accuracy\"] \n\nviewof fastText_acc = Inputs.range([80.0, 100.0], {\n  label: \"FastText accuracy:\", \n  step: 0.1,\n  value: fastText_acc_actual,\n  width: 500\n  })\n\nviewof langdetect_acc = Inputs.range([80.0, 100.0], {\n  label: \"Langdetect accuracy:\", \n  step: 0.1,\n  value: langdetect_acc_actual,\n  width: 500\n  })\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"accuracy_conclusion = {\n  if (fastText_acc > langdetect_acc) {\n    return `FastText achieved a greater accuracy, achieving ${fastText_acc}% compared to langdetect, which achieved ${langdetect_acc}%`\n  } else if (fastText_acc < langdetect_acc) {\n    return `Langdetect achieved a greater accuracy, achieving ${langdetect_acc}% vs fastText's ${fastText_acc}%`\n  } else {\n    return `FastText and langdetect both achieved the same accuracy: ${fastText_acc}%`\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"fastText_limit = {\n  function isInRange(value, lowerBound, upperBound) {\n    return value >= lowerBound && value <= upperBound;\n  }\n  let fastText_lower = 90;\n  let fastText_upper = 100;\n  if (!isInRange(fastText_acc, fastText_lower, fastText_upper)) {\n    return `Not in Range: ${fastText_acc}% is outside the range of ${fastText_lower}% - ${fastText_upper}%`\n  } else {\n    return `Within Range: ${fastText_acc}% is within the range of ${fastText_lower}% - ${fastText_upper}%`\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"langdetect_limit = {\n  function isInRange(value, lowerBound, upperBound) {\n    return value >= lowerBound && value <= upperBound;\n  }\n  let langdetect_lower = 90;\n  let langdetect_upper = 100;\n  if (!isInRange(langdetect_acc, langdetect_lower, langdetect_upper)) {\n    return `Not in Range: ${langdetect_acc}% is outside the range of ${langdetect_lower}% - ${langdetect_upper}%`\n  } else {\n    return `Within Range: ${langdetect_acc}% is within the range of ${langdetect_lower}% - ${langdetect_upper}%`\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"d3 = require(\"d3@7\")\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"\nvisualisation = {\n  d3.csv(\"orchestration_crate/statistics_lpap/output/accuracy_by_language.csv\").then(data => {\n    const container = d3.select(\"#d3-visualization\");\n    const margin = { top: 40, right: 0, bottom: 10, left: 25 };  \n    const svgWidth = container.node().getBoundingClientRect().width;\n    const barHeight = 5;  // example height for each set of bars (FastText + Langdetect for a language)\n    const barSpacing = 10;  // space between each set of bars\n    const calculatedHeight = data.length * (barHeight + barSpacing) + margin.top + margin.bottom;\n\n    const svgHeight = calculatedHeight;  // use calculated height instead of fixed height\n\n    const width = svgWidth - margin.left - margin.right;\n    const height = svgHeight - margin.top - margin.bottom;\n\n    const x0 = d3.scaleBand()\n        .domain(data.map(d => d.Language_ID))\n        .rangeRound([margin.left, width - margin.right])\n        .paddingInner(0.1);\n\n    const x1 = d3.scaleBand()\n        .domain(['FastText', 'Langdetect'])\n        .rangeRound([0, x0.bandwidth()])\n        .padding(0.05);\n\n    const y = d3.scaleLinear()\n        .domain([0, 100]).nice()\n        .rangeRound([height - margin.bottom, margin.top]);\n\n    const color = d3.scaleOrdinal()\n        .domain(['FastText', 'Langdetect'])\n        .range(['#1f77b4', '#ff7f0e']);\n\n    const xAxis = g => g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(d3.axisBottom(x0).tickSizeOuter(0))\n        .call(g => g.select(\".domain\").remove());\n\n    const yAxis = g => g\n        .attr(\"transform\", `translate(${margin.left},0)`)\n        .call(d3.axisLeft(y).ticks(null, \"s\"))\n        .call(g => g.select(\".domain\").remove());\n\n    const svg = container.append(\"svg\")\n        .attr(\"width\", svgWidth)\n        .attr(\"height\", svgHeight)\n        .style(\"margin-bottom\", \"10px\");  // Reduce space below the SVG\n\n    const title = \"Accuracy Comparison: FastText vs. Langdetect\";  // Replace with your desired title\n\n    svg.append(\"text\")\n        .attr(\"x\", svgWidth / 2)          // Center the text\n        .attr(\"y\", margin.top / 2)        // Position it at the top, within the top margin\n        .attr(\"text-anchor\", \"middle\")    // Ensure the text is centered at the position\n        .style(\"font-size\", \"20px\")       // Set font size\n        .style(\"font-weight\", \"bold\")     // Make it bold\n        .text(title);\n\n\n    // Tooltip\n    const tooltip = d3.select(\"body\").append(\"div\")\n        .attr(\"class\", \"tooltip\")\n        .style(\"opacity\", 0)\n        .style(\"background-color\", \"white\")\n        .style(\"border\", \"solid\")\n        .style(\"border-width\", \"2px\")\n        .style(\"border-radius\", \"5px\")\n        .style(\"padding\", \"5px\")\n        .style(\"position\", \"absolute\");\n\n    const barGroups = svg.append(\"g\")\n        .selectAll(\"g\")\n        .data(data)\n        .join(\"g\")\n        .attr(\"class\", \"barGroup\")\n        .attr(\"transform\", d => `translate(${x0(d.Language_ID)},0)`);\n\n    barGroups.selectAll(\"rect\")\n        .data(d => ['FastText', 'Langdetect'].map(key => ({ key, value: d[key] })))\n        .join(\"rect\")\n        .attr(\"x\", d => x1(d.key))\n        .attr(\"y\", d => y(d.value))\n        .attr(\"width\", x1.bandwidth())\n        .attr(\"height\", d => y(0) - y(d.value))\n        .attr(\"fill\", d => color(d.key))\n        .on(\"mouseover\", function(event, d) {\n            const originalColor = d3.select(this).attr(\"fill\");\n            d3.select(this)\n                .attr(\"data-original-color\", originalColor)  // Store the original color\n                .attr(\"fill\", d3.rgb(originalColor).darker(2));\n            tooltip.transition()\n                .duration(200)\n                .style(\"opacity\", .9);\n            tooltip.html(d.key + \": \" + d.value + \"%\")\n                .style(\"left\", (event.pageX + 5) + \"px\")\n                .style(\"top\", (event.pageY - 28) + \"px\");\n        })\n        .on(\"mouseout\", function(d) {\n            const originalColor = d3.select(this).attr(\"data-original-color\");\n            d3.select(this)\n                .attr(\"fill\", originalColor)  // Reset to the original color\n                .attr(\"data-original-color\", null);  // Clear the data attribute\n            tooltip.transition()\n                .duration(500)\n                .style(\"opacity\", 0);\n        });\n\n    svg.append(\"g\")\n        .call(xAxis);\n\n    svg.append(\"g\")\n        .call(yAxis);\n\n    // Sorting functions\n    function sortByFastText() {\n        data.sort((a, b) => b.FastText - a.FastText);\n        x0.domain(data.map(d => d.Language_ID));\n        svg.selectAll(\".barGroup\").transition().duration(1000).attr(\"transform\", d => `translate(${x0(d.Language_ID)},0)`);\n        \n        // Update button styles\n        d3.selectAll(\"button\").filter(function() { return d3.select(this).text() === \"Sort by FastText\"; }).style(\"background-color\", color('FastText'));\n        d3.selectAll(\"button\").filter(function() { return d3.select(this).text() === \"Sort by Langdetect\"; }).style(\"background-color\", \"#f4f4f4\");\n    }\n\n    function sortByLangdetect() {\n        data.sort((a, b) => b.Langdetect - a.Langdetect);\n        x0.domain(data.map(d => d.Language_ID));\n        svg.selectAll(\".barGroup\").transition().duration(1000).attr(\"transform\", d => `translate(${x0(d.Language_ID)},0)`);\n        \n        // Update button styles\n        d3.selectAll(\"button\").filter(function() { return d3.select(this).text() === \"Sort by Langdetect\"; }).style(\"background-color\", color('Langdetect'));\n        d3.selectAll(\"button\").filter(function() { return d3.select(this).text() === \"Sort by FastText\"; }).style(\"background-color\", \"#f4f4f4\");\n    }\n\n    // Styling function for buttons\n    function styleButton(button) {\n        button.style(\"padding\", \"5px 10px\")\n              .style(\"margin\", \"5px\")\n              .style(\"cursor\", \"pointer\")\n              .style(\"border\", \"1px solid #888\")\n              .style(\"background-color\", \"#f4f4f4\")\n              .style(\"border-radius\", \"5px\")\n              .style(\"text-align\", \"center\")\n              .on(\"mouseover\", function() {\n                  const currentColor = d3.select(this).style(\"background-color\");\n                  if (currentColor === \"rgb(244, 244, 244)\") {  // Check if the current color is the default\n                      d3.select(this).style(\"background-color\", \"#e0e0e0\");\n                  }\n              })\n              .on(\"mouseout\", function() {\n                  const currentColor = d3.select(this).style(\"background-color\");\n                  if (currentColor === \"rgb(224, 224, 224)\") {  // Check if the color was changed on hover\n                      d3.select(this).style(\"background-color\", \"#f4f4f4\");\n                  }\n              });\n    }\n\n    // Add sort buttons\n    const sortButtons = container.append(\"div\")\n        .style(\"margin-bottom\", \"5px\")  // Reduce space below the sort buttons\n        .style(\"text-align\", \"left\");   // Ensure left alignment\n\n    styleButton(sortButtons.append(\"button\").text(\"Sort by FastText\").on(\"click\", sortByFastText));\n    styleButton(sortButtons.append(\"button\").text(\"Sort by Langdetect\").on(\"click\", sortByLangdetect));\n\n    // Interactive Legends\n    const legend = container.append(\"div\")\n        .attr(\"class\", \"legend\")\n        .style(\"display\", \"flex\")\n        .style(\"justify-content\", \"flex-start\")  // Align the legend to the left\n        .style(\"margin-bottom\", \"10px\");  // Add some space below the legends for clarity\n\n\n    const tools = ['FastText', 'Langdetect'];\n\n    tools.forEach(tool => {\n        const legendButton = legend.append(\"div\").style(\"margin\", \"0 10px\");\n\n        const colorBox = legendButton.append(\"span\")\n            .style(\"background-color\", color(tool))\n            .style(\"width\", \"20px\")\n            .style(\"height\", \"20px\")\n            .style(\"display\", \"inline-block\")\n            .style(\"margin-right\", \"5px\");\n\n        const toolName = legendButton.append(\"span\")\n            .text(tool)\n            .style(\"cursor\", \"pointer\")\n            .on(\"click\", function() {\n                const isActive = !d3.select(this).classed(\"inactive\");\n                d3.select(this).classed(\"inactive\", isActive);\n                \n                if (isActive) {\n                    colorBox.style(\"opacity\", \"0.5\");\n                    toolName.style(\"text-decoration\", \"line-through\");\n                } else {\n                    colorBox.style(\"opacity\", \"1\");\n                    toolName.style(\"text-decoration\", \"none\");\n                }\n\n                svg.selectAll(\".barGroup\")\n                    .selectAll(\"rect\")\n                    .filter(d => d.key === tool)\n                    .transition()\n                    .duration(300)\n                    .style(\"opacity\", isActive ? 0 : 1);\n            });\n            styleButton(legendButton);\n        });  \n    });\n}\n"},{"methodName":"interpretQuiet","source":"shinyInput('fastText_acc')"},{"methodName":"interpretQuiet","source":"shinyInput('langdetect_acc')"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../..";
window._ojs.paths.runtimeToRoot = "../../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb9" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Language identification method comparison</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>Welcome to our LivePublication demonstration! The landscape of scientific research is ever-evolving, and with it, the way we share and consume scientific knowledge needs to progress. Traditional scientific publishing, with its static format, often struggles to effectively convey the dynamic nature of modern computational research. This article represents initial steps toward enabling and standardising methods of integrating distributed scientific workflows with top level narrative text, building a pipeline from workflow execution, to publication outputs. </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">""</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>Green links<span class="kw">&lt;/a&gt;</span> indicate links to the underpining orchestration crate.</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>The LivePublication framework aims to enable live, reactive publications while simultaneously enhancing transparency, repeatability, and collaborative scientific research. In order to achive this, LivePublication leverages custom Globus action providers (<span class="co">[</span><span class="ot">AP overview</span><span class="co">](https://action-provider-tools.readthedocs.io/en/latest/)</span>, <span class="co">[</span><span class="ot">custom AP</span><span class="co">](https://github.com/LivePublication/LP_GlobusAP_Template)</span>) to simultaniously perform work within workflows, and generate descriptive RO-Crates. </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>Subsequently, these individual artefacts come together to form an 'orchestration crate'. This crate offers a comprehensive description of the workflow execution, cataloging inputs, outputs, methods, and associated metadata.</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>The generated orchestration crate serves as a data model for publications, exemplified by this website, which offers live updates to figures, metrics, and other metadata. The design, captured metadata, and integration techniques with the publication are all areas currently being refined. For a deeper exploration of this method, refer to <span class="co">[</span><span class="ot">this article</span><span class="co">](https://livepublication.github.io/LP_Pub_DistCompPub/)</span>. </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>For an overview of the publication pipeline behind this article, see @fig-globus-overview. It's important to mention that the methods featured within Layer 3, pertaining to publication and presentation, are showcased for demonstration only. We are actively researching the transition from the orchestration crate to the final compiled article.</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>::: {.column-body-outset}</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="al">![Publication pipline overview](globus-overview.svg)</span>{fig-alt="A figure of the overall LivePublication pipeline used to generate this article." #fig-globus-overview}</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>A browseable version of the orchestration crate can be found <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>here<span class="kw">&lt;/a&gt;</span> for demonstration purposes. </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="fu">## Globus flow, and orchestration crate generation</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>Find a simple representation of the Globus flow below. Each node in the flow diagram provides a link to execution details within the orchestration crate. </span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid securityLevel='loose'}</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>flowchart LR</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  data_store[(Data store)] --&gt; transfer_ap[Transfer AP]</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>  transfer_ap --&gt; ft[[fastText LPAP]] &amp; ld[[langdetect LPAP]]</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>  ft &amp; ld --&gt; transfer_ap2[Transfer AP]</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>  transfer_ap2 --&gt; stats[[Statistics LPAP]]</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>  stats --&gt; transfer_ap3[Transfer AP]</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>  transfer_ap3 --&gt; results_store[(Results store)]</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>  click transfer_ap <span class="ot">"</span><span class="st">http://130.216.217.137:8080/#DS_fastText_Transfer.py</span><span class="ot">"</span> <span class="ot">"</span><span class="st">Go to transfer 1</span><span class="ot">"</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>  click ft <span class="ot">"</span><span class="st">http://130.216.217.137:8080/#fastText.py</span><span class="ot">"</span> <span class="ot">"</span><span class="st">Go to fastText LPAP</span><span class="ot">"</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>  click transfer_ap2 <span class="ot">"</span><span class="st">http://130.216.217.137:8080/#fastText_statistics_transfer.py</span><span class="ot">"</span> <span class="ot">"</span><span class="st">go to transfer 2</span><span class="ot">"</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>  click ld <span class="ot">"</span><span class="st">http://130.216.217.137:8080/#langdetect.py</span><span class="ot">"</span> <span class="ot">"</span><span class="st">Go to langdetect LPAP</span><span class="ot">"</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>  click transfer_ap_3 <span class="ot">"</span><span class="st">http://130.216.217.137:8080/#langdetect_statistics_transfer.py</span><span class="ot">"</span> <span class="ot">"</span><span class="st">Go to transfer 3</span><span class="ot">"</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>  click stats <span class="ot">"</span><span class="st">http://130.216.217.137:8080/#statistics.py</span><span class="ot">"</span> <span class="ot">"</span><span class="st">Go to statistics LPAP</span><span class="ot">"</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>Click on each component to be directed to the relevant orchestration crate component.</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reactive publications and programmatic articles</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>This section provides examples of how we can leverage live data to create variable, or dependent text. </span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>There are many plausable methods for how variable content can be implemented. At its most basic, switch or if statements can be used to include/exclude information dependent on a combination of variables. More complex applications include hybrid LLM/Author NL generation, providing more flexible outputs.</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Load in variables &amp; provide reactive components --&gt;</span></span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a><span class="co">//| code-overflow: wrap</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>fastText_stats <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"orchestration_crate/statistics_lpap/output/fastText_stats.json"</span>)<span class="op">.</span><span class="fu">json</span>() </span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>langdetect_stats <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"orchestration_crate/statistics_lpap/output/langdetect_stats.json"</span>)<span class="op">.</span><span class="fu">json</span>() </span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>fastText_acc_actual <span class="op">=</span> fastText_stats[<span class="st">"overall_accuracy"</span>] </span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>langdetect_acc_actual <span class="op">=</span> langdetect_stats[<span class="st">"overall_accuracy"</span>] </span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>viewof fastText_acc <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">80.0</span><span class="op">,</span> <span class="fl">100.0</span>]<span class="op">,</span> {</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"FastText accuracy:"</span><span class="op">,</span> </span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> fastText_acc_actual<span class="op">,</span></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>viewof langdetect_acc <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">80.0</span><span class="op">,</span> <span class="fl">100.0</span>]<span class="op">,</span> {</span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Langdetect accuracy:"</span><span class="op">,</span> </span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> langdetect_acc_actual<span class="op">,</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">500</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>Modifying these parameters changes the data-model, and therefore the outputs of this article. </span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a><span class="fu">### Variable text</span></span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a>A simple example of variable text is provided below. Depending on the relative accuracy results of each model (fastText, langdetect) the content changes. </span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: True</span></span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a>accuracy_conclusion <span class="op">=</span> {</span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (fastText_acc <span class="op">&gt;</span> langdetect_acc) {</span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`FastText achieved a greater accuracy, achieving </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">% compared to langdetect, which achieved </span><span class="sc">${</span>langdetect_acc<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (fastText_acc <span class="op">&lt;</span> langdetect_acc) {</span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Langdetect achieved a greater accuracy, achieving </span><span class="sc">${</span>langdetect_acc<span class="sc">}</span><span class="vs">% vs fastText's </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`FastText and langdetect both achieved the same accuracy: </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a><span class="fu">## Variable Text</span></span>
<span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a>${accuracy_conclusion}</span>
<span id="cb9-112"><a href="#cb9-112" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-113"><a href="#cb9-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-114"><a href="#cb9-114" aria-hidden="true" tabindex="-1"></a><span class="fu">### Delimited variables and dashboard-like functionality</span></span>
<span id="cb9-115"><a href="#cb9-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-116"><a href="#cb9-116" aria-hidden="true" tabindex="-1"></a>Rather than a simple switch statement as above, we can provide alerts if variables exit a delimited range, or the relationship between variables changes. </span>
<span id="cb9-117"><a href="#cb9-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-120"><a href="#cb9-120" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: True</span></span>
<span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a><span class="co">//| code-overflow: wrap</span></span>
<span id="cb9-123"><a href="#cb9-123" aria-hidden="true" tabindex="-1"></a>fastText_limit <span class="op">=</span> {</span>
<span id="cb9-124"><a href="#cb9-124" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">isInRange</span>(value<span class="op">,</span> lowerBound<span class="op">,</span> upperBound) {</span>
<span id="cb9-125"><a href="#cb9-125" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value <span class="op">&gt;=</span> lowerBound <span class="op">&amp;&amp;</span> value <span class="op">&lt;=</span> upperBound<span class="op">;</span></span>
<span id="cb9-126"><a href="#cb9-126" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-127"><a href="#cb9-127" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> fastText_lower <span class="op">=</span> <span class="dv">90</span><span class="op">;</span></span>
<span id="cb9-128"><a href="#cb9-128" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> fastText_upper <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb9-129"><a href="#cb9-129" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="fu">isInRange</span>(fastText_acc<span class="op">,</span> fastText_lower<span class="op">,</span> fastText_upper)) {</span>
<span id="cb9-130"><a href="#cb9-130" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Not in Range: </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">% is outside the range of </span><span class="sc">${</span>fastText_lower<span class="sc">}</span><span class="vs">% - </span><span class="sc">${</span>fastText_upper<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb9-131"><a href="#cb9-131" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb9-132"><a href="#cb9-132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Within Range: </span><span class="sc">${</span>fastText_acc<span class="sc">}</span><span class="vs">% is within the range of </span><span class="sc">${</span>fastText_lower<span class="sc">}</span><span class="vs">% - </span><span class="sc">${</span>fastText_upper<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb9-133"><a href="#cb9-133" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-134"><a href="#cb9-134" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-135"><a href="#cb9-135" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-136"><a href="#cb9-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-139"><a href="#cb9-139" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb9-140"><a href="#cb9-140" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: True</span></span>
<span id="cb9-141"><a href="#cb9-141" aria-hidden="true" tabindex="-1"></a><span class="co">//| code-overflow: wrap</span></span>
<span id="cb9-142"><a href="#cb9-142" aria-hidden="true" tabindex="-1"></a>langdetect_limit <span class="op">=</span> {</span>
<span id="cb9-143"><a href="#cb9-143" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">isInRange</span>(value<span class="op">,</span> lowerBound<span class="op">,</span> upperBound) {</span>
<span id="cb9-144"><a href="#cb9-144" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value <span class="op">&gt;=</span> lowerBound <span class="op">&amp;&amp;</span> value <span class="op">&lt;=</span> upperBound<span class="op">;</span></span>
<span id="cb9-145"><a href="#cb9-145" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-146"><a href="#cb9-146" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> langdetect_lower <span class="op">=</span> <span class="dv">90</span><span class="op">;</span></span>
<span id="cb9-147"><a href="#cb9-147" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> langdetect_upper <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb9-148"><a href="#cb9-148" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="fu">isInRange</span>(langdetect_acc<span class="op">,</span> langdetect_lower<span class="op">,</span> langdetect_upper)) {</span>
<span id="cb9-149"><a href="#cb9-149" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Not in Range: </span><span class="sc">${</span>langdetect_acc<span class="sc">}</span><span class="vs">% is outside the range of </span><span class="sc">${</span>langdetect_lower<span class="sc">}</span><span class="vs">% - </span><span class="sc">${</span>langdetect_upper<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb9-150"><a href="#cb9-150" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb9-151"><a href="#cb9-151" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Within Range: </span><span class="sc">${</span>langdetect_acc<span class="sc">}</span><span class="vs">% is within the range of </span><span class="sc">${</span>langdetect_lower<span class="sc">}</span><span class="vs">% - </span><span class="sc">${</span>langdetect_upper<span class="sc">}</span><span class="vs">%`</span></span>
<span id="cb9-152"><a href="#cb9-152" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-153"><a href="#cb9-153" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-154"><a href="#cb9-154" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-155"><a href="#cb9-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-156"><a href="#cb9-156" aria-hidden="true" tabindex="-1"></a>:::{.callout-warning}</span>
<span id="cb9-157"><a href="#cb9-157" aria-hidden="true" tabindex="-1"></a><span class="fu">## fastText accuracy limit</span></span>
<span id="cb9-158"><a href="#cb9-158" aria-hidden="true" tabindex="-1"></a>${fastText_limit}</span>
<span id="cb9-159"><a href="#cb9-159" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-160"><a href="#cb9-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-161"><a href="#cb9-161" aria-hidden="true" tabindex="-1"></a>:::{.callout-warning}</span>
<span id="cb9-162"><a href="#cb9-162" aria-hidden="true" tabindex="-1"></a><span class="fu">## fastText accuracy limit</span></span>
<span id="cb9-163"><a href="#cb9-163" aria-hidden="true" tabindex="-1"></a>${langdetect_limit}</span>
<span id="cb9-164"><a href="#cb9-164" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-165"><a href="#cb9-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-166"><a href="#cb9-166" aria-hidden="true" tabindex="-1"></a><span class="fu">## LID performance comparison </span></span>
<span id="cb9-167"><a href="#cb9-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-168"><a href="#cb9-168" aria-hidden="true" tabindex="-1"></a>While future LivePublication applications will primarily focus on how author-driven content can be realistically, and seamlessly integrated with live updating articles, this article uses mostly generative content drawing on data exported from the <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>orchestration crate<span class="kw">&lt;/a&gt;</span>. Research on how the author and live content can be integrated is ongoing. Below, GPT-4 provides a short description of the results of this computational workflow, drawing on data generated during the flow. An overview of the LID comparison is provided in @fig-accuracies_by_language.</span>
<span id="cb9-169"><a href="#cb9-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-170"><a href="#cb9-170" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Model: GPT-4</span>
<span id="cb9-171"><a href="#cb9-171" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Prompt: This experiment compares the performance of two language identification methods: fastText and Langdetect. FastText's results are <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/fastText_stats.json"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>results<span class="kw">&lt;/a&gt;</span> and langdetect results are <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/langdetect_stats.json"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>results<span class="kw">&lt;/a&gt;</span>. Write a few paragraphs discussing the performance of each, comparing their best and worst language accuracies. </span>
<span id="cb9-172"><a href="#cb9-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-173"><a href="#cb9-173" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb9-174"><a href="#cb9-174" aria-hidden="true" tabindex="-1"></a><span class="fu">## Generative Content</span></span>
<span id="cb9-175"><a href="#cb9-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-176"><a href="#cb9-176" aria-hidden="true" tabindex="-1"></a>The evaluation of the language identification methods - fastText and Langdetect - reveals a nuanced performance profile contingent on the specific language being identified. Overall, the fastText model demonstrated superior performance with an overall accuracy of <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/fastText_stats.json"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>``98.6%``<span class="kw">&lt;/a&gt;</span> compared to Langdetect's <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/langdetect_stats.json"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>``97.91%``<span class="kw">&lt;/a&gt;</span>. This comparison, however, does not capture the individual variances in accuracy across languages for the two models.</span>
<span id="cb9-177"><a href="#cb9-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-178"><a href="#cb9-178" aria-hidden="true" tabindex="-1"></a>Delving into these language-specific performances, FastText exhibits impeccable accuracy in identifying several languages. These include German (deu), Greek (ell), English (eng), French (fra), Japanese (jpn), Thai (tha), and Chinese (zho) - all at 100% accuracy. Other languages such as Bulgarian (bul), Italian (ita), Russian (rus), and Vietnamese (vie) also show remarkable results with accuracy close to 100%. FastText's weakest performance is observed for Swahili (swa) at <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/fastText_stats.json"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>``85.4%``<span class="kw">&lt;/a&gt;</span> accuracy, indicating a potential area for model improvement.</span>
<span id="cb9-179"><a href="#cb9-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-180"><a href="#cb9-180" aria-hidden="true" tabindex="-1"></a>On the other hand, Langdetect also showcased impressive accuracy with several languages reaching 100% identification rate, namely Greek (ell), Japanese (jpn), Thai (tha), and Vietnamese (vie). It performed notably well with Arabic (ara), German (deu), and Turkish (tur) too, with accuracy rates nearing 100%. The lowest performance was observed with Dutch (nld) at <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/langdetect_stats.json"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>``93.6%``<span class="kw">&lt;/a&gt;</span>, signifying a potential area of focus for future model enhancements.</span>
<span id="cb9-181"><a href="#cb9-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-182"><a href="#cb9-182" aria-hidden="true" tabindex="-1"></a>When comparing the two models on specific languages, FastText notably outperforms Langdetect in identifying languages such as Bulgarian, English, French, Dutch, Polish, Portuguese, and Spanish. Conversely, both models demonstrate equivalent performance in Arabic, Greek, Japanese, Thai, and Vietnamese identification. Langdetect's performance appears to surpass FastText slightly in Hindi and Urdu.</span>
<span id="cb9-183"><a href="#cb9-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-184"><a href="#cb9-184" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-185"><a href="#cb9-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-186"><a href="#cb9-186" aria-hidden="true" tabindex="-1"></a><span class="fu">### Figure integration and generation</span></span>
<span id="cb9-187"><a href="#cb9-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-188"><a href="#cb9-188" aria-hidden="true" tabindex="-1"></a>Figures and other visualisations can either be generated during the execution of a workflow, or implemented at the document level through code blocks. An example of both approaches is provided below. </span>
<span id="cb9-189"><a href="#cb9-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-190"><a href="#cb9-190" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="al">![Accuracy by language](orchestration_crate/statistics_lpap/output/accuracy_by_language.png)</span><span class="ot">{#fig-accuracies_by_language}</span><span class="co">](http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/accuracy_by_language.png)</span></span>
<span id="cb9-191"><a href="#cb9-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-192"><a href="#cb9-192" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb9-193"><a href="#cb9-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-194"><a href="#cb9-194" aria-hidden="true" tabindex="-1"></a>This figure was generated during the statistics step of the workflow. Click to be directed to this component within the orchestration crate. </span>
<span id="cb9-195"><a href="#cb9-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-196"><a href="#cb9-196" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-197"><a href="#cb9-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-198"><a href="#cb9-198" aria-hidden="true" tabindex="-1"></a>@fig-accuracies_by_language, above, was generated within the workflow, however, as the orchestration crate contains the data generated via the workflow, we can generate these figures at the document level as well.</span>
<span id="cb9-199"><a href="#cb9-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-202"><a href="#cb9-202" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb9-203"><a href="#cb9-203" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3@7"</span>)</span>
<span id="cb9-204"><a href="#cb9-204" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-205"><a href="#cb9-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-206"><a href="#cb9-206" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">"d3-visualization"</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb9-207"><a href="#cb9-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-208"><a href="#cb9-208" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb9-209"><a href="#cb9-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-210"><a href="#cb9-210" aria-hidden="true" tabindex="-1"></a>This figure was generated within the Quarto document using data collected from the orchestration crate <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#crate_15XkigrEbqqfZ/output/accuracy_by_language.csv"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>here<span class="kw">&lt;/a&gt;</span> and showcases how LivePublications can integrate with top-level code/narrative-text technologies (e.g. Quarto, Jupyter notebooks, Google colaboratory).</span>
<span id="cb9-211"><a href="#cb9-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-212"><a href="#cb9-212" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-213"><a href="#cb9-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-214"><a href="#cb9-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-217"><a href="#cb9-217" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb9-218"><a href="#cb9-218" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: True</span></span>
<span id="cb9-219"><a href="#cb9-219" aria-hidden="true" tabindex="-1"></a><span class="co">//| code-overflow: wrap</span></span>
<span id="cb9-220"><a href="#cb9-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-221"><a href="#cb9-221" aria-hidden="true" tabindex="-1"></a>visualisation <span class="op">=</span> {</span>
<span id="cb9-222"><a href="#cb9-222" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"orchestration_crate/statistics_lpap/output/accuracy_by_language.csv"</span>)<span class="op">.</span><span class="fu">then</span>(data <span class="kw">=&gt;</span> {</span>
<span id="cb9-223"><a href="#cb9-223" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> container <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="st">"#d3-visualization"</span>)<span class="op">;</span></span>
<span id="cb9-224"><a href="#cb9-224" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> margin <span class="op">=</span> { <span class="dt">top</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span> <span class="dt">right</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">bottom</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="dt">left</span><span class="op">:</span> <span class="dv">25</span> }<span class="op">;</span>  </span>
<span id="cb9-225"><a href="#cb9-225" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> svgWidth <span class="op">=</span> container<span class="op">.</span><span class="fu">node</span>()<span class="op">.</span><span class="fu">getBoundingClientRect</span>()<span class="op">.</span><span class="at">width</span><span class="op">;</span></span>
<span id="cb9-226"><a href="#cb9-226" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> barHeight <span class="op">=</span> <span class="dv">5</span><span class="op">;</span>  <span class="co">// example height for each set of bars (FastText + Langdetect for a language)</span></span>
<span id="cb9-227"><a href="#cb9-227" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> barSpacing <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>  <span class="co">// space between each set of bars</span></span>
<span id="cb9-228"><a href="#cb9-228" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> calculatedHeight <span class="op">=</span> data<span class="op">.</span><span class="at">length</span> <span class="op">*</span> (barHeight <span class="op">+</span> barSpacing) <span class="op">+</span> margin<span class="op">.</span><span class="at">top</span> <span class="op">+</span> margin<span class="op">.</span><span class="at">bottom</span><span class="op">;</span></span>
<span id="cb9-229"><a href="#cb9-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-230"><a href="#cb9-230" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> svgHeight <span class="op">=</span> calculatedHeight<span class="op">;</span>  <span class="co">// use calculated height instead of fixed height</span></span>
<span id="cb9-231"><a href="#cb9-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-232"><a href="#cb9-232" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> width <span class="op">=</span> svgWidth <span class="op">-</span> margin<span class="op">.</span><span class="at">left</span> <span class="op">-</span> margin<span class="op">.</span><span class="at">right</span><span class="op">;</span></span>
<span id="cb9-233"><a href="#cb9-233" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> height <span class="op">=</span> svgHeight <span class="op">-</span> margin<span class="op">.</span><span class="at">top</span> <span class="op">-</span> margin<span class="op">.</span><span class="at">bottom</span><span class="op">;</span></span>
<span id="cb9-234"><a href="#cb9-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-235"><a href="#cb9-235" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> x0 <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleBand</span>()</span>
<span id="cb9-236"><a href="#cb9-236" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">domain</span>(data<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Language_ID</span>))</span>
<span id="cb9-237"><a href="#cb9-237" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">rangeRound</span>([margin<span class="op">.</span><span class="at">left</span><span class="op">,</span> width <span class="op">-</span> margin<span class="op">.</span><span class="at">right</span>])</span>
<span id="cb9-238"><a href="#cb9-238" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">paddingInner</span>(<span class="fl">0.1</span>)<span class="op">;</span></span>
<span id="cb9-239"><a href="#cb9-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-240"><a href="#cb9-240" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> x1 <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleBand</span>()</span>
<span id="cb9-241"><a href="#cb9-241" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">domain</span>([<span class="st">'FastText'</span><span class="op">,</span> <span class="st">'Langdetect'</span>])</span>
<span id="cb9-242"><a href="#cb9-242" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">rangeRound</span>([<span class="dv">0</span><span class="op">,</span> x0<span class="op">.</span><span class="fu">bandwidth</span>()])</span>
<span id="cb9-243"><a href="#cb9-243" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">padding</span>(<span class="fl">0.05</span>)<span class="op">;</span></span>
<span id="cb9-244"><a href="#cb9-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-245"><a href="#cb9-245" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> y <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb9-246"><a href="#cb9-246" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>])<span class="op">.</span><span class="fu">nice</span>()</span>
<span id="cb9-247"><a href="#cb9-247" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">rangeRound</span>([height <span class="op">-</span> margin<span class="op">.</span><span class="at">bottom</span><span class="op">,</span> margin<span class="op">.</span><span class="at">top</span>])<span class="op">;</span></span>
<span id="cb9-248"><a href="#cb9-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-249"><a href="#cb9-249" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> color <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleOrdinal</span>()</span>
<span id="cb9-250"><a href="#cb9-250" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">domain</span>([<span class="st">'FastText'</span><span class="op">,</span> <span class="st">'Langdetect'</span>])</span>
<span id="cb9-251"><a href="#cb9-251" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">range</span>([<span class="st">'#1f77b4'</span><span class="op">,</span> <span class="st">'#ff7f0e'</span>])<span class="op">;</span></span>
<span id="cb9-252"><a href="#cb9-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-253"><a href="#cb9-253" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> xAxis <span class="op">=</span> g <span class="kw">=&gt;</span> g</span>
<span id="cb9-254"><a href="#cb9-254" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(0,</span><span class="sc">${</span>height <span class="op">-</span> margin<span class="op">.</span><span class="at">bottom</span><span class="sc">}</span><span class="vs">)`</span>)</span>
<span id="cb9-255"><a href="#cb9-255" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisBottom</span>(x0)<span class="op">.</span><span class="fu">tickSizeOuter</span>(<span class="dv">0</span>))</span>
<span id="cb9-256"><a href="#cb9-256" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(g <span class="kw">=&gt;</span> g<span class="op">.</span><span class="fu">select</span>(<span class="st">".domain"</span>)<span class="op">.</span><span class="fu">remove</span>())<span class="op">;</span></span>
<span id="cb9-257"><a href="#cb9-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-258"><a href="#cb9-258" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> yAxis <span class="op">=</span> g <span class="kw">=&gt;</span> g</span>
<span id="cb9-259"><a href="#cb9-259" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(</span><span class="sc">${</span>margin<span class="op">.</span><span class="at">left</span><span class="sc">}</span><span class="vs">,0)`</span>)</span>
<span id="cb9-260"><a href="#cb9-260" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisLeft</span>(y)<span class="op">.</span><span class="fu">ticks</span>(<span class="kw">null</span><span class="op">,</span> <span class="st">"s"</span>))</span>
<span id="cb9-261"><a href="#cb9-261" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(g <span class="kw">=&gt;</span> g<span class="op">.</span><span class="fu">select</span>(<span class="st">".domain"</span>)<span class="op">.</span><span class="fu">remove</span>())<span class="op">;</span></span>
<span id="cb9-262"><a href="#cb9-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-263"><a href="#cb9-263" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> svg <span class="op">=</span> container<span class="op">.</span><span class="fu">append</span>(<span class="st">"svg"</span>)</span>
<span id="cb9-264"><a href="#cb9-264" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> svgWidth)</span>
<span id="cb9-265"><a href="#cb9-265" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> svgHeight)</span>
<span id="cb9-266"><a href="#cb9-266" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-bottom"</span><span class="op">,</span> <span class="st">"10px"</span>)<span class="op">;</span>  <span class="co">// Reduce space below the SVG</span></span>
<span id="cb9-267"><a href="#cb9-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-268"><a href="#cb9-268" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> title <span class="op">=</span> <span class="st">"Accuracy Comparison: FastText vs. Langdetect"</span><span class="op">;</span>  <span class="co">// Replace with your desired title</span></span>
<span id="cb9-269"><a href="#cb9-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-270"><a href="#cb9-270" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb9-271"><a href="#cb9-271" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> svgWidth <span class="op">/</span> <span class="dv">2</span>)          <span class="co">// Center the text</span></span>
<span id="cb9-272"><a href="#cb9-272" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> margin<span class="op">.</span><span class="at">top</span> <span class="op">/</span> <span class="dv">2</span>)        <span class="co">// Position it at the top, within the top margin</span></span>
<span id="cb9-273"><a href="#cb9-273" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)    <span class="co">// Ensure the text is centered at the position</span></span>
<span id="cb9-274"><a href="#cb9-274" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="st">"20px"</span>)       <span class="co">// Set font size</span></span>
<span id="cb9-275"><a href="#cb9-275" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)     <span class="co">// Make it bold</span></span>
<span id="cb9-276"><a href="#cb9-276" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">text</span>(title)<span class="op">;</span></span>
<span id="cb9-277"><a href="#cb9-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-278"><a href="#cb9-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-279"><a href="#cb9-279" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Tooltip</span></span>
<span id="cb9-280"><a href="#cb9-280" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> tooltip <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="st">"body"</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">"div"</span>)</span>
<span id="cb9-281"><a href="#cb9-281" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"tooltip"</span>)</span>
<span id="cb9-282"><a href="#cb9-282" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb9-283"><a href="#cb9-283" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"white"</span>)</span>
<span id="cb9-284"><a href="#cb9-284" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"border"</span><span class="op">,</span> <span class="st">"solid"</span>)</span>
<span id="cb9-285"><a href="#cb9-285" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"border-width"</span><span class="op">,</span> <span class="st">"2px"</span>)</span>
<span id="cb9-286"><a href="#cb9-286" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"border-radius"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb9-287"><a href="#cb9-287" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"padding"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb9-288"><a href="#cb9-288" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"position"</span><span class="op">,</span> <span class="st">"absolute"</span>)<span class="op">;</span></span>
<span id="cb9-289"><a href="#cb9-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-290"><a href="#cb9-290" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> barGroups <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb9-291"><a href="#cb9-291" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb9-292"><a href="#cb9-292" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(data)</span>
<span id="cb9-293"><a href="#cb9-293" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)</span>
<span id="cb9-294"><a href="#cb9-294" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"barGroup"</span>)</span>
<span id="cb9-295"><a href="#cb9-295" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`translate(</span><span class="sc">${</span><span class="fu">x0</span>(d<span class="op">.</span><span class="at">Language_ID</span>)<span class="sc">}</span><span class="vs">,0)`</span>)<span class="op">;</span></span>
<span id="cb9-296"><a href="#cb9-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-297"><a href="#cb9-297" aria-hidden="true" tabindex="-1"></a>    barGroups<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"rect"</span>)</span>
<span id="cb9-298"><a href="#cb9-298" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(d <span class="kw">=&gt;</span> [<span class="st">'FastText'</span><span class="op">,</span> <span class="st">'Langdetect'</span>]<span class="op">.</span><span class="fu">map</span>(key <span class="kw">=&gt;</span> ({ key<span class="op">,</span> <span class="dt">value</span><span class="op">:</span> d[key] })))</span>
<span id="cb9-299"><a href="#cb9-299" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">join</span>(<span class="st">"rect"</span>)</span>
<span id="cb9-300"><a href="#cb9-300" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">x1</span>(d<span class="op">.</span><span class="at">key</span>))</span>
<span id="cb9-301"><a href="#cb9-301" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">value</span>))</span>
<span id="cb9-302"><a href="#cb9-302" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> x1<span class="op">.</span><span class="fu">bandwidth</span>())</span>
<span id="cb9-303"><a href="#cb9-303" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">y</span>(<span class="dv">0</span>) <span class="op">-</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">value</span>))</span>
<span id="cb9-304"><a href="#cb9-304" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">color</span>(d<span class="op">.</span><span class="at">key</span>))</span>
<span id="cb9-305"><a href="#cb9-305" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseover"</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span><span class="op">,</span> d) {</span>
<span id="cb9-306"><a href="#cb9-306" aria-hidden="true" tabindex="-1"></a>            <span class="kw">const</span> originalColor <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span>)<span class="op">;</span></span>
<span id="cb9-307"><a href="#cb9-307" aria-hidden="true" tabindex="-1"></a>            d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb9-308"><a href="#cb9-308" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"data-original-color"</span><span class="op">,</span> originalColor)  <span class="co">// Store the original color</span></span>
<span id="cb9-309"><a href="#cb9-309" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">rgb</span>(originalColor)<span class="op">.</span><span class="fu">darker</span>(<span class="dv">2</span>))<span class="op">;</span></span>
<span id="cb9-310"><a href="#cb9-310" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb9-311"><a href="#cb9-311" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">duration</span>(<span class="dv">200</span>)</span>
<span id="cb9-312"><a href="#cb9-312" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="op">.</span><span class="dv">9</span>)<span class="op">;</span></span>
<span id="cb9-313"><a href="#cb9-313" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">.</span><span class="fu">html</span>(d<span class="op">.</span><span class="at">key</span> <span class="op">+</span> <span class="st">": "</span> <span class="op">+</span> d<span class="op">.</span><span class="at">value</span> <span class="op">+</span> <span class="st">"%"</span>)</span>
<span id="cb9-314"><a href="#cb9-314" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">style</span>(<span class="st">"left"</span><span class="op">,</span> (<span class="bu">event</span><span class="op">.</span><span class="at">pageX</span> <span class="op">+</span> <span class="dv">5</span>) <span class="op">+</span> <span class="st">"px"</span>)</span>
<span id="cb9-315"><a href="#cb9-315" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">style</span>(<span class="st">"top"</span><span class="op">,</span> (<span class="bu">event</span><span class="op">.</span><span class="at">pageY</span> <span class="op">-</span> <span class="dv">28</span>) <span class="op">+</span> <span class="st">"px"</span>)<span class="op">;</span></span>
<span id="cb9-316"><a href="#cb9-316" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb9-317"><a href="#cb9-317" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseout"</span><span class="op">,</span> <span class="kw">function</span>(d) {</span>
<span id="cb9-318"><a href="#cb9-318" aria-hidden="true" tabindex="-1"></a>            <span class="kw">const</span> originalColor <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"data-original-color"</span>)<span class="op">;</span></span>
<span id="cb9-319"><a href="#cb9-319" aria-hidden="true" tabindex="-1"></a>            d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb9-320"><a href="#cb9-320" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> originalColor)  <span class="co">// Reset to the original color</span></span>
<span id="cb9-321"><a href="#cb9-321" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"data-original-color"</span><span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span>  <span class="co">// Clear the data attribute</span></span>
<span id="cb9-322"><a href="#cb9-322" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb9-323"><a href="#cb9-323" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">duration</span>(<span class="dv">500</span>)</span>
<span id="cb9-324"><a href="#cb9-324" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb9-325"><a href="#cb9-325" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb9-326"><a href="#cb9-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-327"><a href="#cb9-327" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb9-328"><a href="#cb9-328" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(xAxis)<span class="op">;</span></span>
<span id="cb9-329"><a href="#cb9-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-330"><a href="#cb9-330" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb9-331"><a href="#cb9-331" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(yAxis)<span class="op">;</span></span>
<span id="cb9-332"><a href="#cb9-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-333"><a href="#cb9-333" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Sorting functions</span></span>
<span id="cb9-334"><a href="#cb9-334" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">sortByFastText</span>() {</span>
<span id="cb9-335"><a href="#cb9-335" aria-hidden="true" tabindex="-1"></a>        data<span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> b<span class="op">.</span><span class="at">FastText</span> <span class="op">-</span> a<span class="op">.</span><span class="at">FastText</span>)<span class="op">;</span></span>
<span id="cb9-336"><a href="#cb9-336" aria-hidden="true" tabindex="-1"></a>        x0<span class="op">.</span><span class="fu">domain</span>(data<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Language_ID</span>))<span class="op">;</span></span>
<span id="cb9-337"><a href="#cb9-337" aria-hidden="true" tabindex="-1"></a>        svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".barGroup"</span>)<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">duration</span>(<span class="dv">1000</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`translate(</span><span class="sc">${</span><span class="fu">x0</span>(d<span class="op">.</span><span class="at">Language_ID</span>)<span class="sc">}</span><span class="vs">,0)`</span>)<span class="op">;</span></span>
<span id="cb9-338"><a href="#cb9-338" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-339"><a href="#cb9-339" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Update button styles</span></span>
<span id="cb9-340"><a href="#cb9-340" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>() { <span class="cf">return</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">text</span>() <span class="op">===</span> <span class="st">"Sort by FastText"</span><span class="op">;</span> })<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="fu">color</span>(<span class="st">'FastText'</span>))<span class="op">;</span></span>
<span id="cb9-341"><a href="#cb9-341" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>() { <span class="cf">return</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">text</span>() <span class="op">===</span> <span class="st">"Sort by Langdetect"</span><span class="op">;</span> })<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#f4f4f4"</span>)<span class="op">;</span></span>
<span id="cb9-342"><a href="#cb9-342" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-343"><a href="#cb9-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-344"><a href="#cb9-344" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">sortByLangdetect</span>() {</span>
<span id="cb9-345"><a href="#cb9-345" aria-hidden="true" tabindex="-1"></a>        data<span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> b<span class="op">.</span><span class="at">Langdetect</span> <span class="op">-</span> a<span class="op">.</span><span class="at">Langdetect</span>)<span class="op">;</span></span>
<span id="cb9-346"><a href="#cb9-346" aria-hidden="true" tabindex="-1"></a>        x0<span class="op">.</span><span class="fu">domain</span>(data<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Language_ID</span>))<span class="op">;</span></span>
<span id="cb9-347"><a href="#cb9-347" aria-hidden="true" tabindex="-1"></a>        svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".barGroup"</span>)<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">duration</span>(<span class="dv">1000</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`translate(</span><span class="sc">${</span><span class="fu">x0</span>(d<span class="op">.</span><span class="at">Language_ID</span>)<span class="sc">}</span><span class="vs">,0)`</span>)<span class="op">;</span></span>
<span id="cb9-348"><a href="#cb9-348" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-349"><a href="#cb9-349" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Update button styles</span></span>
<span id="cb9-350"><a href="#cb9-350" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>() { <span class="cf">return</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">text</span>() <span class="op">===</span> <span class="st">"Sort by Langdetect"</span><span class="op">;</span> })<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="fu">color</span>(<span class="st">'Langdetect'</span>))<span class="op">;</span></span>
<span id="cb9-351"><a href="#cb9-351" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>() { <span class="cf">return</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">text</span>() <span class="op">===</span> <span class="st">"Sort by FastText"</span><span class="op">;</span> })<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#f4f4f4"</span>)<span class="op">;</span></span>
<span id="cb9-352"><a href="#cb9-352" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-353"><a href="#cb9-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-354"><a href="#cb9-354" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Styling function for buttons</span></span>
<span id="cb9-355"><a href="#cb9-355" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">styleButton</span>(button) {</span>
<span id="cb9-356"><a href="#cb9-356" aria-hidden="true" tabindex="-1"></a>        button<span class="op">.</span><span class="fu">style</span>(<span class="st">"padding"</span><span class="op">,</span> <span class="st">"5px 10px"</span>)</span>
<span id="cb9-357"><a href="#cb9-357" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb9-358"><a href="#cb9-358" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"cursor"</span><span class="op">,</span> <span class="st">"pointer"</span>)</span>
<span id="cb9-359"><a href="#cb9-359" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"border"</span><span class="op">,</span> <span class="st">"1px solid #888"</span>)</span>
<span id="cb9-360"><a href="#cb9-360" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#f4f4f4"</span>)</span>
<span id="cb9-361"><a href="#cb9-361" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"border-radius"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb9-362"><a href="#cb9-362" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-align"</span><span class="op">,</span> <span class="st">"center"</span>)</span>
<span id="cb9-363"><a href="#cb9-363" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseover"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb9-364"><a href="#cb9-364" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">const</span> currentColor <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span>)<span class="op">;</span></span>
<span id="cb9-365"><a href="#cb9-365" aria-hidden="true" tabindex="-1"></a>                  <span class="cf">if</span> (currentColor <span class="op">===</span> <span class="st">"rgb(244, 244, 244)"</span>) {  <span class="co">// Check if the current color is the default</span></span>
<span id="cb9-366"><a href="#cb9-366" aria-hidden="true" tabindex="-1"></a>                      d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#e0e0e0"</span>)<span class="op">;</span></span>
<span id="cb9-367"><a href="#cb9-367" aria-hidden="true" tabindex="-1"></a>                  }</span>
<span id="cb9-368"><a href="#cb9-368" aria-hidden="true" tabindex="-1"></a>              })</span>
<span id="cb9-369"><a href="#cb9-369" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseout"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb9-370"><a href="#cb9-370" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">const</span> currentColor <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span>)<span class="op">;</span></span>
<span id="cb9-371"><a href="#cb9-371" aria-hidden="true" tabindex="-1"></a>                  <span class="cf">if</span> (currentColor <span class="op">===</span> <span class="st">"rgb(224, 224, 224)"</span>) {  <span class="co">// Check if the color was changed on hover</span></span>
<span id="cb9-372"><a href="#cb9-372" aria-hidden="true" tabindex="-1"></a>                      d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="st">"#f4f4f4"</span>)<span class="op">;</span></span>
<span id="cb9-373"><a href="#cb9-373" aria-hidden="true" tabindex="-1"></a>                  }</span>
<span id="cb9-374"><a href="#cb9-374" aria-hidden="true" tabindex="-1"></a>              })<span class="op">;</span></span>
<span id="cb9-375"><a href="#cb9-375" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-376"><a href="#cb9-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-377"><a href="#cb9-377" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add sort buttons</span></span>
<span id="cb9-378"><a href="#cb9-378" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sortButtons <span class="op">=</span> container<span class="op">.</span><span class="fu">append</span>(<span class="st">"div"</span>)</span>
<span id="cb9-379"><a href="#cb9-379" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-bottom"</span><span class="op">,</span> <span class="st">"5px"</span>)  <span class="co">// Reduce space below the sort buttons</span></span>
<span id="cb9-380"><a href="#cb9-380" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-align"</span><span class="op">,</span> <span class="st">"left"</span>)<span class="op">;</span>   <span class="co">// Ensure left alignment</span></span>
<span id="cb9-381"><a href="#cb9-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-382"><a href="#cb9-382" aria-hidden="true" tabindex="-1"></a>    <span class="fu">styleButton</span>(sortButtons<span class="op">.</span><span class="fu">append</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">text</span>(<span class="st">"Sort by FastText"</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> sortByFastText))<span class="op">;</span></span>
<span id="cb9-383"><a href="#cb9-383" aria-hidden="true" tabindex="-1"></a>    <span class="fu">styleButton</span>(sortButtons<span class="op">.</span><span class="fu">append</span>(<span class="st">"button"</span>)<span class="op">.</span><span class="fu">text</span>(<span class="st">"Sort by Langdetect"</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> sortByLangdetect))<span class="op">;</span></span>
<span id="cb9-384"><a href="#cb9-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-385"><a href="#cb9-385" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Interactive Legends</span></span>
<span id="cb9-386"><a href="#cb9-386" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> legend <span class="op">=</span> container<span class="op">.</span><span class="fu">append</span>(<span class="st">"div"</span>)</span>
<span id="cb9-387"><a href="#cb9-387" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"legend"</span>)</span>
<span id="cb9-388"><a href="#cb9-388" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"display"</span><span class="op">,</span> <span class="st">"flex"</span>)</span>
<span id="cb9-389"><a href="#cb9-389" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"justify-content"</span><span class="op">,</span> <span class="st">"flex-start"</span>)  <span class="co">// Align the legend to the left</span></span>
<span id="cb9-390"><a href="#cb9-390" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-bottom"</span><span class="op">,</span> <span class="st">"10px"</span>)<span class="op">;</span>  <span class="co">// Add some space below the legends for clarity</span></span>
<span id="cb9-391"><a href="#cb9-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-392"><a href="#cb9-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-393"><a href="#cb9-393" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> tools <span class="op">=</span> [<span class="st">'FastText'</span><span class="op">,</span> <span class="st">'Langdetect'</span>]<span class="op">;</span></span>
<span id="cb9-394"><a href="#cb9-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-395"><a href="#cb9-395" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">.</span><span class="fu">forEach</span>(tool <span class="kw">=&gt;</span> {</span>
<span id="cb9-396"><a href="#cb9-396" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> legendButton <span class="op">=</span> legend<span class="op">.</span><span class="fu">append</span>(<span class="st">"div"</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"margin"</span><span class="op">,</span> <span class="st">"0 10px"</span>)<span class="op">;</span></span>
<span id="cb9-397"><a href="#cb9-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-398"><a href="#cb9-398" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> colorBox <span class="op">=</span> legendButton<span class="op">.</span><span class="fu">append</span>(<span class="st">"span"</span>)</span>
<span id="cb9-399"><a href="#cb9-399" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"background-color"</span><span class="op">,</span> <span class="fu">color</span>(tool))</span>
<span id="cb9-400"><a href="#cb9-400" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"width"</span><span class="op">,</span> <span class="st">"20px"</span>)</span>
<span id="cb9-401"><a href="#cb9-401" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"height"</span><span class="op">,</span> <span class="st">"20px"</span>)</span>
<span id="cb9-402"><a href="#cb9-402" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"display"</span><span class="op">,</span> <span class="st">"inline-block"</span>)</span>
<span id="cb9-403"><a href="#cb9-403" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-right"</span><span class="op">,</span> <span class="st">"5px"</span>)<span class="op">;</span></span>
<span id="cb9-404"><a href="#cb9-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-405"><a href="#cb9-405" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> toolName <span class="op">=</span> legendButton<span class="op">.</span><span class="fu">append</span>(<span class="st">"span"</span>)</span>
<span id="cb9-406"><a href="#cb9-406" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">text</span>(tool)</span>
<span id="cb9-407"><a href="#cb9-407" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">style</span>(<span class="st">"cursor"</span><span class="op">,</span> <span class="st">"pointer"</span>)</span>
<span id="cb9-408"><a href="#cb9-408" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb9-409"><a href="#cb9-409" aria-hidden="true" tabindex="-1"></a>                <span class="kw">const</span> isActive <span class="op">=</span> <span class="op">!</span>d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">classed</span>(<span class="st">"inactive"</span>)<span class="op">;</span></span>
<span id="cb9-410"><a href="#cb9-410" aria-hidden="true" tabindex="-1"></a>                d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">classed</span>(<span class="st">"inactive"</span><span class="op">,</span> isActive)<span class="op">;</span></span>
<span id="cb9-411"><a href="#cb9-411" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb9-412"><a href="#cb9-412" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> (isActive) {</span>
<span id="cb9-413"><a href="#cb9-413" aria-hidden="true" tabindex="-1"></a>                    colorBox<span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="st">"0.5"</span>)<span class="op">;</span></span>
<span id="cb9-414"><a href="#cb9-414" aria-hidden="true" tabindex="-1"></a>                    toolName<span class="op">.</span><span class="fu">style</span>(<span class="st">"text-decoration"</span><span class="op">,</span> <span class="st">"line-through"</span>)<span class="op">;</span></span>
<span id="cb9-415"><a href="#cb9-415" aria-hidden="true" tabindex="-1"></a>                } <span class="cf">else</span> {</span>
<span id="cb9-416"><a href="#cb9-416" aria-hidden="true" tabindex="-1"></a>                    colorBox<span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="st">"1"</span>)<span class="op">;</span></span>
<span id="cb9-417"><a href="#cb9-417" aria-hidden="true" tabindex="-1"></a>                    toolName<span class="op">.</span><span class="fu">style</span>(<span class="st">"text-decoration"</span><span class="op">,</span> <span class="st">"none"</span>)<span class="op">;</span></span>
<span id="cb9-418"><a href="#cb9-418" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb9-419"><a href="#cb9-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-420"><a href="#cb9-420" aria-hidden="true" tabindex="-1"></a>                svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".barGroup"</span>)</span>
<span id="cb9-421"><a href="#cb9-421" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"rect"</span>)</span>
<span id="cb9-422"><a href="#cb9-422" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">key</span> <span class="op">===</span> tool)</span>
<span id="cb9-423"><a href="#cb9-423" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb9-424"><a href="#cb9-424" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">duration</span>(<span class="dv">300</span>)</span>
<span id="cb9-425"><a href="#cb9-425" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> isActive <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb9-426"><a href="#cb9-426" aria-hidden="true" tabindex="-1"></a>            })<span class="op">;</span></span>
<span id="cb9-427"><a href="#cb9-427" aria-hidden="true" tabindex="-1"></a>            <span class="fu">styleButton</span>(legendButton)<span class="op">;</span></span>
<span id="cb9-428"><a href="#cb9-428" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span>  </span>
<span id="cb9-429"><a href="#cb9-429" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb9-430"><a href="#cb9-430" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-431"><a href="#cb9-431" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-432"><a href="#cb9-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-433"><a href="#cb9-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-434"><a href="#cb9-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-435"><a href="#cb9-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-436"><a href="#cb9-436" aria-hidden="true" tabindex="-1"></a><span class="fu">## Workflow / Method description</span></span>
<span id="cb9-437"><a href="#cb9-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-438"><a href="#cb9-438" aria-hidden="true" tabindex="-1"></a>Below is a very early attempt at generative content based on the generated <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#WEP.json"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>Workflow Execution Plan<span class="kw">&lt;/a&gt;</span> (WEP). The WEP only provides a description of the Globus flow, and includes no information regarding the actual execution of the method. Including details from the Workflow Execution Description (WED) can further enhance the description including things like execution state (succeeded, failed), time taken per step, and other pertinent information. </span>
<span id="cb9-439"><a href="#cb9-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-440"><a href="#cb9-440" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Model: GPT-4</span>
<span id="cb9-441"><a href="#cb9-441" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Prompt: Generate a description of this workflow, from the perspective of an academic methodological section: <span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#WEP.json"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>WEP<span class="kw">&lt;/a&gt;</span></span>
<span id="cb9-442"><a href="#cb9-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-443"><a href="#cb9-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-444"><a href="#cb9-444" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb9-445"><a href="#cb9-445" aria-hidden="true" tabindex="-1"></a><span class="fu">## Generative Content</span></span>
<span id="cb9-446"><a href="#cb9-446" aria-hidden="true" tabindex="-1"></a>The methodology to compare the performance of two language identification models, fastText and langdetect, involves the execution of a series of actions within a structured workflow. The actions range from data transfer operations to the execution of language identification models and statistical analysis of the generated results. The overall flow is organized as follows:</span>
<span id="cb9-447"><a href="#cb9-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-448"><a href="#cb9-448" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#DS_fastText_Transfer.py"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>**Data Transfer for fastText Model**<span class="kw">&lt;/a&gt;</span>: The process begins by transferring the required dataset from the data store to the location accessible by the fastText model. This is done using Globus, a high-speed data transfer protocol. The specific parameters of this operation such as the source and destination endpoint identifiers, along with the respective paths are supplied at runtime.</span>
<span id="cb9-449"><a href="#cb9-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-450"><a href="#cb9-450" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#fastText.py"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>**fastText Model Execution**<span class="kw">&lt;/a&gt;</span>: With the data in place, the fastText language identification model is executed. The model reads the input data from the path specified in the previous step, performs language identification, and stores the result in the same location.</span>
<span id="cb9-451"><a href="#cb9-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-452"><a href="#cb9-452" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#fastText_statistics_transfer.py"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>**Result Transfer for fastText Model**<span class="kw">&lt;/a&gt;</span>: The output of the fastText model, including statistics related to its performance, is then transferred back to the data store via another Globus transfer operation.</span>
<span id="cb9-453"><a href="#cb9-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-454"><a href="#cb9-454" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#DS_langDetect_transfer.py"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>**Data Transfer for langdetect Model**<span class="kw">&lt;/a&gt;</span>: Similarly to step 1, the required dataset is transferred from the data store to the location accessible by the langdetect model using a Globus transfer operation.</span>
<span id="cb9-455"><a href="#cb9-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-456"><a href="#cb9-456" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#langdetect.py"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>**langdetect Model Execution**<span class="kw">&lt;/a&gt;</span>: The langdetect model is then executed, processing the transferred data to perform language identification. The results of the model are stored in the designated location.</span>
<span id="cb9-457"><a href="#cb9-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-458"><a href="#cb9-458" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"http://130.216.217.137:8080/#langdetect_statistics_transfer.py"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>**Result Transfer for langdetect Model**<span class="kw">&lt;/a&gt;</span>: The results of the langdetect model, including its performance statistics, are then transferred back to the data store via Globus transfer operation.</span>
<span id="cb9-459"><a href="#cb9-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-460"><a href="#cb9-460" aria-hidden="true" tabindex="-1"></a><span class="ss">7. </span><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"(http://130.216.217.137:8080/#statistics.py"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>**Statistical Analysis**<span class="kw">&lt;/a&gt;</span>: With the results from both models in place, a statistical analysis is performed to compare their performances. The analysis includes accuracy statistics, and the generation of figures, tables, and other representations of the results for presentation in the publication layer.</span>
<span id="cb9-461"><a href="#cb9-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-462"><a href="#cb9-462" aria-hidden="true" tabindex="-1"></a><span class="ss">8. </span><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"(http://130.216.217.137:8080/#statistics_DS_transfer.py"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: green;"</span><span class="kw">&gt;</span>**Statistics Transfer to the Data Store**<span class="kw">&lt;/a&gt;</span>: Finally, the results of the statistical analysis are transferred back to the data store using another Globus transfer operation.</span>
<span id="cb9-463"><a href="#cb9-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-464"><a href="#cb9-464" aria-hidden="true" tabindex="-1"></a>Each of these operations is executed asynchronously, with designated wait times to ensure the completion of each task before moving to the next. The process has been designed for scalability and efficiency, with a focus on managing data and computational resources effectively.</span>
<span id="cb9-465"><a href="#cb9-465" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-466"><a href="#cb9-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-467"><a href="#cb9-467" aria-hidden="true" tabindex="-1"></a><span class="fu">### Method description generation experiement</span></span>
<span id="cb9-468"><a href="#cb9-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-469"><a href="#cb9-469" aria-hidden="true" tabindex="-1"></a>Each LPAP contains a method directory including the docker image and associated scripts. Using these, we can attempt to generate descriptions of the method in NL. This is an early experiement into the performance/accuracy of such a method. </span>
<span id="cb9-470"><a href="#cb9-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-471"><a href="#cb9-471" aria-hidden="true" tabindex="-1"></a><span class="fu">#### FastText LPAP</span></span>
<span id="cb9-472"><a href="#cb9-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-473"><a href="#cb9-473" aria-hidden="true" tabindex="-1"></a>{{&lt; downloadthis orchestration_crate/fastText_lpap/method_resources/computation_docker/main.py dname="fastText" label="Download the script" icon="filetype-py" type="info" &gt;}}</span>
<span id="cb9-474"><a href="#cb9-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-475"><a href="#cb9-475" aria-hidden="true" tabindex="-1"></a>::: {add-from=orchestration_crate/fastText_lpap/method_resources/computation_docker/main.py}</span>
<span id="cb9-476"><a href="#cb9-476" aria-hidden="true" tabindex="-1"></a><span class="in">```{.py}</span></span>
<span id="cb9-477"><a href="#cb9-477" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-478"><a href="#cb9-478" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-479"><a href="#cb9-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-480"><a href="#cb9-480" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb9-481"><a href="#cb9-481" aria-hidden="true" tabindex="-1"></a><span class="fu">## Generative Content</span></span>
<span id="cb9-482"><a href="#cb9-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-483"><a href="#cb9-483" aria-hidden="true" tabindex="-1"></a>FastText is a library for text classification and representation learning, created by Facebook's AI Research lab. This script loads a FastText model trained to classify text and then uses this model to predict the class of each line of an input text file.</span>
<span id="cb9-484"><a href="#cb9-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-485"><a href="#cb9-485" aria-hidden="true" tabindex="-1"></a>Here's a step-by-step breakdown:</span>
<span id="cb9-486"><a href="#cb9-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-487"><a href="#cb9-487" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>The script begins by setting up necessary directories. The base directory (<span class="in">`BASE_DIR`</span>) is set as the directory where this script is located. <span class="in">`INPUT_DIR`</span> and <span class="in">`OUTPUT_DIR`</span> are then defined as subdirectories of the base directory.</span>
<span id="cb9-488"><a href="#cb9-488" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>In the main execution block (<span class="in">`if name == "main":`</span>), the script first opens an input file (<span class="in">`sys.argv[1]`</span>) with read access using the codecs library, which allows the script to handle text encoded in UTF-8. The content of the file is read line by line into the lines variable.</span>
<span id="cb9-489"><a href="#cb9-489" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>A pre-trained FastText model is loaded from a file named <span class="in">`model.lid.top800.epoch20.neg100.dim100.ns.small.min5.ftz`</span>. This model is trained to predict the class of a line of text.</span>
<span id="cb9-490"><a href="#cb9-490" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>The script then iterates through each line in the input file again. For each line, any newline character () at the end of the line is removed using <span class="in">`rstrip("")`</span>. The cleaned line is then fed to the FastText model to generate a prediction. Each prediction is appended to the predictions list.</span>
<span id="cb9-491"><a href="#cb9-491" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Finally, all the predictions are written to a file in the output directory named <span class="in">`fastText_predictions.txt`</span>. Each prediction is written on a new line, with any "label" prefix removed.</span>
<span id="cb9-492"><a href="#cb9-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-493"><a href="#cb9-493" aria-hidden="true" tabindex="-1"></a>In the context of the workflow, this script follows the DS_fastText_Transfer state where the necessary files are transferred to the appropriate location. The output of this script, fastText_predictions.txt, is used in the final statistics state of the workflow to compute accuracy statistics.</span>
<span id="cb9-494"><a href="#cb9-494" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-495"><a href="#cb9-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-496"><a href="#cb9-496" aria-hidden="true" tabindex="-1"></a><span class="fu">#### langdetect LPAP</span></span>
<span id="cb9-497"><a href="#cb9-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-498"><a href="#cb9-498" aria-hidden="true" tabindex="-1"></a>{{&lt; downloadthis orchestration_crate/langdetect_lpap/method_resources/computation_docker/main.py dname="langdetect" label="Download the script" icon="filetype-py" type="info" &gt;}}</span>
<span id="cb9-499"><a href="#cb9-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-500"><a href="#cb9-500" aria-hidden="true" tabindex="-1"></a>::: {add-from=orchestration_crate/langdetect_lpap/method_resources/computation_docker/main.py}</span>
<span id="cb9-501"><a href="#cb9-501" aria-hidden="true" tabindex="-1"></a><span class="in">```{.py}</span></span>
<span id="cb9-502"><a href="#cb9-502" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-503"><a href="#cb9-503" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-504"><a href="#cb9-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-505"><a href="#cb9-505" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb9-506"><a href="#cb9-506" aria-hidden="true" tabindex="-1"></a><span class="fu">## Generative Content</span></span>
<span id="cb9-507"><a href="#cb9-507" aria-hidden="true" tabindex="-1"></a>This Python script uses the langdetect library to determine the language of each line of text in an input file. The resulting predictions are then written to an output file.</span>
<span id="cb9-508"><a href="#cb9-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-509"><a href="#cb9-509" aria-hidden="true" tabindex="-1"></a>Here's a step-by-step breakdown:</span>
<span id="cb9-510"><a href="#cb9-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-511"><a href="#cb9-511" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>The script sets up necessary directories. The base directory (<span class="in">`BASE_DIR`</span>) is set as the directory where the script resides. The input directory (<span class="in">`INPUT_DIR`</span>) and the output directory (<span class="in">`OUTPUT_DIR`</span>) are then set as environment variables or default to the subdirectories "input" and "output" in the base directory, respectively.</span>
<span id="cb9-512"><a href="#cb9-512" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>In the main execution block (<span class="in">`if __name__ == "__main__":`</span>), the script begins by opening an input file (<span class="in">`sys.argv[1]`</span>) with read access using the codecs library, enabling it to handle UTF-8 encoded text. The contents of the file are read line by line into the variable 'lines'.</span>
<span id="cb9-513"><a href="#cb9-513" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>An output file named "langdetect_predictions.txt" is opened or created in the output directory. </span>
<span id="cb9-514"><a href="#cb9-514" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>The script then starts processing each line in the 'lines' variable. It removes leading and trailing white spaces from each line. If the line is not empty, it increments a counter and tries to determine the language of the line using langdetect. The detected language or an error message (in case of failure) is then written to the output file.</span>
<span id="cb9-515"><a href="#cb9-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-516"><a href="#cb9-516" aria-hidden="true" tabindex="-1"></a>In the context of the workflow, this script is executed in the 'langdetect' state. It comes after the 'DS_langDetect_transfer' state, where the necessary input file is transferred to the langdetect endpoint. The output of this script, "langdetect_predictions.txt", is then used in the 'statistics' state of the workflow, where the accuracy of the langdetect and fastText predictions are compared.</span>
<span id="cb9-517"><a href="#cb9-517" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb9-518"><a href="#cb9-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-519"><a href="#cb9-519" aria-hidden="true" tabindex="-1"></a><span class="fu">## Referencing</span></span>
<span id="cb9-520"><a href="#cb9-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-521"><a href="#cb9-521" aria-hidden="true" tabindex="-1"></a>Some narrative text which includes a reference (@miller2011cipres).</span>
<span id="cb9-522"><a href="#cb9-522" aria-hidden="true" tabindex="-1"></a>A small list of references:</span>
<span id="cb9-523"><a href="#cb9-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-524"><a href="#cb9-524" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>@uhrin2021workflows</span>
<span id="cb9-525"><a href="#cb9-525" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>@goecks2010galaxy</span>
<span id="cb9-526"><a href="#cb9-526" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>@vescovi2022linking</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<div class="page-columns page-rows-contents page-layout-article"><div class="social-share"><a href="https://twitter.com/share?url=https://mr.schochastics.net/&amp;text=awesome page" target="_blank" class="twitter"><i class="fab fa-twitter fa-fw fa-lg"></i></a><a href="https://www.linkedin.com/shareArticle?url=https://mr.schochastics.net/&amp;title=awesome page" target="_blank" class="linkedin"><i class="fa-brands fa-linkedin-in fa-fw fa-lg"></i></a>  <a href="mailto:?subject=awesome page&amp;body=Check out this link:https://mr.schochastics.net/" target="_blank" class="email"><i class="fa-solid fa-envelope fa-fw fa-lg"></i></a><a href="https://www.facebook.com/sharer.php?u=https://mr.schochastics.net/" target="_blank" class="facebook"><i class="fab fa-facebook-f fa-fw fa-lg"></i></a><a href="https://reddit.com/submit?url=https://mr.schochastics.net/&amp;title=awesome page" target="_blank" class="reddit">   <i class="fa-brands fa-reddit-alien fa-fw fa-lg"></i></a><a href="https://www.stumbleupon.com/submit?url=https://mr.schochastics.net/&amp;title=awesome page" target="_blank" class="stumbleupon"><i class="fa-brands fa-stumbleupon fa-fw fa-lg"></i></a><a href="https://www.tumblr.com/share/link?url=https://mr.schochastics.net/&amp;name=awesome page" target="_blank" class="tumblr"><i class="fa-brands fa-tumblr fa-fw fa-lg"></i></a></div></div>



</body></html>